<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Eddy Jin">

<title>Exploratory data anaylsis for songs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="lb_songs_eda_files/libs/clipboard/clipboard.min.js"></script>
<script src="lb_songs_eda_files/libs/quarto-html/quarto.js"></script>
<script src="lb_songs_eda_files/libs/quarto-html/popper.min.js"></script>
<script src="lb_songs_eda_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lb_songs_eda_files/libs/quarto-html/anchor.min.js"></script>
<link href="lb_songs_eda_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lb_songs_eda_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lb_songs_eda_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lb_songs_eda_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lb_songs_eda_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="lb_songs_eda_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="lb_songs_eda_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="lb_songs_eda_files/libs/jquery-3.5.1/jquery.min.js"></script>
<script src="lb_songs_eda_files/libs/proj4js-2.3.15/proj4.js"></script>
<link href="lb_songs_eda_files/libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/highcharts.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/highcharts-3d.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/highcharts-more.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/stock.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/map.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/data.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/exporting.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/offline-exporting.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/drilldown.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/item-series.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/annotations.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/export-data.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/funnel.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/heatmap.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/treemap.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/sankey.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/dependency-wheel.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/organization.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/solid-gauge.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/streamgraph.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/sunburst.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/vector.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/wordcloud.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/xrange.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/tilemap.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/venn.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/gantt.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/timeline.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/bullet.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/coloraxis.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/dumbbell.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/lollipop.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/series-label.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/plugins/motion.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/custom/reset.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/boost.js"></script>
<script src="lb_songs_eda_files/libs/highchart-binding-0.9.4/highchart.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Exploratory data anaylsis for songs</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Eddy Jin </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="executive-summary--overall-approach" class="level4">
<h4 class="anchored" data-anchor-id="executive-summary--overall-approach">Executive Summary- Overall Approach</h4>
<p>The exploratory data analysis (EDA) is conducted to guide the model building process. Based on the insights gained from the EDA, two models are proposed to strike a balance between the complexity required to solve the problem and the ease of deploying the model in a production environment.</p>
<p><strong>Data Assumptions</strong>:</p>
<ul>
<li><code>copies_sold</code> is the amount sold since release date, recorded on <code>2023-01-01</code></li>
</ul>
<p><strong>Proposed modelling strategy</strong>:</p>
<p><strong>Model A</strong> - assuming the objective is to predict whether a <em>new</em> song will sell more than two million copies. We can use a random forest regression model, with <code>copies_sold</code> as the target variable and the following features:</p>
<ul>
<li><p><code>loudness</code>, <code>energy</code>, and <code>length</code></p></li>
<li><p>One-hot encoded <code>genre</code> variables</p></li>
<li><p><code>days_since_launch_date</code> (a newly engineered feature)</p></li>
</ul>
<p>The random forest regression model is chosen as a starting point for its robustness to outliers and its ability to capture interaction effects discovered in the EDA, as well as any potential non-linear relationships between the features and the target variable.</p>
<p><em>Considerations:</em></p>
<ul>
<li><p>If model interpretation is important, we can use a linear regression with interaction terms.</p></li>
<li><p>A classification model was considered but discounted due to class imbalance.</p></li>
<li><p>If initial model performance is poor consider including the categorical variable <code>brand_popularity.</code></p></li>
</ul>
<p><strong>Model B:</strong></p>
<ul>
<li><p>If the model objective is to evaluate the popularity of a genre over sequential time periods in the <em>future,</em> we can use a time-series approach by centering an auto-regressive model on <code>total_songs_released</code> (new feature) at the quarterly frequency.</p></li>
<li><p>Whereas if it is to evaluate the popularity of genre <em>historically</em> we can start with the below baseline regression specification at the song level</p></li>
</ul>
<p><span id="eq-1"><span class="math display">\[
y_{i} = \beta_0t+\beta_1 X_{i1} + \beta_2 X_{i2} + \cdots + \beta_k X_{ik} + \sum_{g=1}^G \alpha_g I(g = G_i) + \sum_{j=1}^J \gamma_j I(j = Y_i) + \epsilon_{it}
\tag{1}\]</span></span> Where:</p>
<ul>
<li><p><span class="math inline">\(y_{i}\)</span> is the copies sold for song <span class="math inline">\(i\)</span>,</p></li>
<li><p><span class="math inline">\(t\)</span> is linear trend term which​ represents the number of days since the start of the dataset.</p></li>
<li><p><span class="math inline">\(X_{ik}\)</span> represents the <span class="math inline">\(k\)</span>-th feature of song <span class="math inline">\(i\)</span></p></li>
<li><p><span class="math inline">\(\alpha_g\)</span> is the coefficient for the genre dummy variable for genre <span class="math inline">\(g\)</span>, and <span class="math inline">\(I(g=G_i​)\)</span> is an indicator function that equals 1 if song <span class="math inline">\(i\)</span> belongs to genre <span class="math inline">\(g\)</span>, and 0 otherwise. Omitting one genre as reference category.</p></li>
<li><p><span class="math inline">\(γ_j\)</span>​ is the coefficient for the year dummy variable for year <span class="math inline">\(j\)</span>, and <span class="math inline">\(I(j=Y_i​)\)</span> is an indicator function that equals 1 if song <span class="math inline">\(i\)</span> was released in year <span class="math inline">\(j\)</span>, and 0 otherwise. Omitting one year as reference category.</p></li>
</ul>
<p><em>Consideration</em></p>
<ul>
<li><p>Include and test interaction terms between year and genre to understand the popularity dynamics of genres across years. A form of regularization may need to be used.</p></li>
<li><p>EDA suggests there may be insufficient data points to estimate the fixed-effects at the band level</p></li>
<li><p>Can experiment with a mixed effects model to capture the hierarchical nature of the data set by adding an random effects term for each band.</p></li>
</ul>
</section>
<section id="import-data-and-load-required-packages" class="level4">
<h4 class="anchored" data-anchor-id="import-data-and-load-required-packages">1. Import data and load required packages</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install pacman if not already installed</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: pacman</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clear workspace </span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the required packages using pacman</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse,ggplot2, psych, ggcorrplot, highcharter,plotly,viridis)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data set and parse date column as date objects </span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>songs_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/dataset.csv"</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.Date</span>(date))</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Check information of data frame </span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(songs_df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  band_id             genre song_id       date loudness   length energy
1     808 Psychedelictrance    6534 2018-01-01       79 3.345114    137
2    1143       Gothicsynth    9234 2018-01-01       78 4.912700     86
3    1263        Indiedisco   10168 2018-01-01       99 5.889923    159
4     744       Folktronica    6017 2018-01-01       92 5.639068    143
5     606          Trip-pop    4805 2018-01-01       72 5.837072    144
6    1022  Futuristicountry    8189 2018-01-01       71 3.652508     85
  copies_sold
1   0.3905431
2   0.5425426
3   0.7230729
4   0.9736569
5   1.0930296
6   1.3378089</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">str</span>(songs_df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   10458 obs. of  8 variables:
 $ band_id    : int  808 1143 1263 744 606 1022 807 446 833 861 ...
 $ genre      : chr  "Psychedelictrance" "Gothicsynth" "Indiedisco" "Folktronica" ...
 $ song_id    : int  6534 9234 10168 6017 4805 8189 6514 3577 6719 6955 ...
 $ date       : Date, format: "2018-01-01" "2018-01-01" ...
 $ loudness   : int  79 78 99 92 72 71 79 73 118 106 ...
 $ length     : num  3.35 4.91 5.89 5.64 5.84 ...
 $ energy     : int  137 86 159 143 144 85 156 NA NA NA ...
 $ copies_sold: num  0.391 0.543 0.723 0.974 1.093 ...
NULL</code></pre>
</div>
</div>
</section>
<section id="data-pre-processing" class="level3">
<h3 class="anchored" data-anchor-id="data-pre-processing">2. Data pre-processing:</h3>
<p>In this section we assess the integrity of the data but checking the following:</p>
<ul>
<li><p>Duplicate rows</p></li>
<li><p>Missing values</p></li>
<li><p>Data anomalies</p></li>
</ul>
<section id="check-for-duplicate-rows" class="level4">
<h4 class="anchored" data-anchor-id="check-for-duplicate-rows">2.1: Check for duplicate rows</h4>
<p><strong>Findings:</strong></p>
<ul>
<li>The dataset contains 205 duplicate song entries, which need to be removed to ensure data integrity and avoid biased results.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assert if unique count of songs matches number of rows </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">nrow</span>(songs_df) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">unique</span>(songs_df)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Duplicate songs exist, return the rows with the duplicate songs </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>duplicate_songs_df  <span class="ot">&lt;-</span> songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">duplicated</span>(song_id) <span class="sc">|</span> <span class="fu">duplicated</span>(song_id, <span class="at">fromLast=</span> <span class="cn">TRUE</span> ))</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify these songs are exact duplicates by checking other columns match the duplicates</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>duplicate_songs_df_verified <span class="ot">&lt;-</span> duplicate_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(song_id) <span class="sc">%&gt;%</span> </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#If all columns have a distinct count of 1 for a particular song_id, it indicates that the duplicate songs are exact duplicates across all columns.</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">n_distinct</span>(.)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-for-missing-values" class="level4">
<h4 class="anchored" data-anchor-id="check-for-missing-values">2.2: Check for missing values</h4>
<p><strong>Findings:</strong></p>
<ul>
<li><p>The <code>energy</code> column has 2,329 missing values. The distribution of <code>copies_sold</code> differs between rows with missing and non-missing <code>energy</code> values, suggesting the miss values might not be completely random.</p></li>
<li><p>At the genre level, the proportions seem stable, therefore modelling at the genre level will be appropriate.</p></li>
<li><p>For simplicity, we assume the data is missing completely at random (MCAR) and remove rows with missing values.</p></li>
<li><p>Future exploration: Conduct statistical tests and consult with the data owner to determine the reason for missing data and use appropriate imputation techniques if a systematic relationship is identified.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of NULL and NA values column wise </span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>missing_values_df <span class="ot">&lt;-</span> songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_all</span>(<span class="sc">~</span><span class="fu">sum</span>(<span class="fu">is.na</span>(.)))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># There are  2329 the missing values, missing only in energy column, check if the missings values are correlated somehow with other features</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Define continous variables</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"copies_sold"</span>, <span class="st">"length"</span>, <span class="st">"energy"</span>, <span class="st">"loudness"</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new column 'is_missing_energy' indicating if energy is missing or not</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>songs_df<span class="sc">$</span>is_missing_energy <span class="ot">&lt;-</span> <span class="fu">is.na</span>(songs_df<span class="sc">$</span>energy)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare the distribution of other features based on missing energy values</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>feature_cols <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(variables, <span class="fu">c</span>(<span class="st">"energy"</span>, <span class="st">"is_missing_energy"</span>))</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>comparison_df <span class="ot">&lt;-</span> songs_df <span class="sc">%&gt;%</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(feature_cols), is_missing_energy) <span class="sc">%&gt;%</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">all_of</span>(feature_cols), <span class="at">names_to =</span> <span class="st">"feature"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the comparison using density plots</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(comparison_df, <span class="fu">aes</span>(<span class="at">x =</span> value, <span class="at">fill =</span> is_missing_energy)) <span class="sc">+</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>feature, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Value"</span>, <span class="at">y =</span> <span class="st">"Density"</span>, <span class="at">fill =</span> <span class="st">"Missing Energy"</span>) <span class="sc">+</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Density Plots of Features by Missing Energy Values"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the genre proportions within missing and non-missing energy data sets</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>genre_proportion_df <span class="ot">&lt;-</span> songs_df <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(is_missing_energy, genre) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(is_missing_energy) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">proportion =</span> count <span class="sc">/</span> <span class="fu">sum</span>(count))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the side-by-side bar chart</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(genre_proportion_df, <span class="fu">aes</span>(<span class="at">x =</span> genre, <span class="at">y =</span> proportion, <span class="at">fill =</span> is_missing_energy)) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Genre"</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>, <span class="at">fill =</span> <span class="st">"Missing Energy"</span>) <span class="sc">+</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Genre Proportions within Missing and Non-Missing Energy Data Sets"</span>) <span class="sc">+</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="check-for-data-anomalies-and-understand-distributions-of-the-variables" class="level4">
<h4 class="anchored" data-anchor-id="check-for-data-anomalies-and-understand-distributions-of-the-variables">2.3: Check for data anomalies and understand distributions of the variables</h4>
<p><u>Findings - Data Errors:</u></p>
<ul>
<li><p>Visual inspection of feature distributions reveals negative values in the “length” variable, which are physically impossible. Rows containing these erroneous “length” values are removed from the dataset.</p></li>
<li><p>Future improvement: Consider imputing incorrect values or seeking clarification from the data owner.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicates and missing values</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>cleaned_songs_df <span class="ot">&lt;-</span> songs_df <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(energy))</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the smoothed distribution of continuous variables  </span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (vars <span class="cf">in</span> variables) {</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(cleaned_songs_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="sc">!!</span><span class="fu">sym</span>(vars))) <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste</span>(<span class="st">"Density plot of"</span>, vars)) <span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-4-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-4-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter length rows to contain values greater than 0 </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>cleaned_songs_df <span class="ot">&lt;-</span>cleaned_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(length <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="exploratory-data-analysis" class="level3">
<h3 class="anchored" data-anchor-id="exploratory-data-analysis">3.0 Exploratory data analysis:</h3>
<section id="calculate-summary-statistics" class="level4">
<h4 class="anchored" data-anchor-id="calculate-summary-statistics">3.1 Calculate summary statistics</h4>
<p>We calculate the summary statistics and generate boxplots for the continuous variables to further familiarise with the distribution of the data.</p>
<p>Findings: There are outliers present in the variables, therefore consider using random forest as a predictive model to tackle this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate summary statistics for continuous variable and return data frame </span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(cleaned_songs_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(variables))) <span class="sc">%&gt;%</span>  </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mean, median, min, max, range, sd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              mean median   min    max  range    sd
copies_sold   0.80   0.60  0.05   5.68   5.63  0.68
length        4.99   4.65  0.22  17.45  17.23  2.07
energy      131.31 131.00 30.00 238.00 208.00 26.56
loudness     85.19  86.00 12.00 162.00 150.00 19.20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create boxplots of each feature </span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(energy, loudness) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"feature"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> feature, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Feature"</span>, <span class="at">y =</span> <span class="st">"Value"</span>, <span class="at">title =</span> <span class="st">"Boxplots of Song Features"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(length, copies_sold) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"feature"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> feature, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Feature"</span>, <span class="at">y =</span> <span class="st">"Value"</span>, <span class="at">title =</span> <span class="st">"Boxplots of Song Features"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="understand-the-data-song-band-and-genre-level-for-modelling-considerations" class="level4">
<h4 class="anchored" data-anchor-id="understand-the-data-song-band-and-genre-level-for-modelling-considerations">3.2 Understand the data song, band and genre level for modelling considerations</h4>
<p>We perform the following analyses:</p>
<ol type="1">
<li><p><strong>Check</strong>: Count the number of songs that sold above 2 million copies to assess potential class imbalance.</p>
<ul>
<li><strong>Findings</strong>: Only ~6% of the songs sold above 2 million copies, suggesting that a regression approach may be more appropriate than a classification approach due to class imbalance.</li>
</ul></li>
<li><p><strong>Check</strong>: Count the total number of songs released each year, both in aggregate and by genre.</p>
<ul>
<li><p><strong>Findings</strong>:</p>
<ul>
<li><p>The aggregate number of songs released per year is generally decreasing.</p></li>
<li><p>The Folktronica genre consistently releases the most songs each year</p></li>
</ul></li>
</ul></li>
<li><p><strong>Check</strong>: Count the total number of songs released by each band across all time to identify any data anomalies and assess the feasibility of training a model at the band level.</p>
<ul>
<li><strong>Findings</strong>: There are 1,390 unique bands and 7,970 observations, with most bands having released fewer than 5 songs. Due to low degrees of freedom can be difficult to estimate the effect of bands.</li>
</ul></li>
<li><p><strong>Check</strong>: Each band only produces the same genre of songs to verify hierarchical structure of data</p>
<ul>
<li><strong>Findings</strong>: All bands in the data set produce the same genre of songs.</li>
</ul></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the proportion of song that  sold above 2 million </span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>proportion_songs_above_2m <span class="ot">&lt;-</span>cleaned_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">proportion_songs_above_2m =</span> <span class="fu">sum</span>(copies_sold <span class="sc">&gt;=</span> <span class="dv">2</span>) <span class="sc">/</span> <span class="fu">nrow</span>(.))</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate total count of songs released in each year in aggregate by genre </span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>songs_yearly_count_df <span class="ot">&lt;-</span>cleaned_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date)) <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, genre) <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_songs_released =</span> <span class="fu">n</span>())</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot total song copies sold by genre</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(genre) <span class="sc">%&gt;%</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_copies_sold =</span> <span class="fu">sum</span>(copies_sold)) <span class="sc">%&gt;%</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_copies_sold)) <span class="sc">%&gt;%</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(genre, total_copies_sold), <span class="at">y =</span> total_copies_sold)) <span class="sc">+</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Genre"</span>, <span class="at">y =</span> <span class="st">"Total Copies Sold"</span>, <span class="at">title =</span> <span class="st">"Total Copies Sold per Genre"</span>) <span class="sc">+</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot total songs released sold by genre divided by total songs released by genre </span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(genre) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_copies_sold =</span> <span class="fu">sum</span>(copies_sold), <span class="at">total_songs_released =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">copies_sold_per_song =</span> total_copies_sold <span class="sc">/</span> total_songs_released) <span class="sc">%&gt;%</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(copies_sold_per_song)) <span class="sc">%&gt;%</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(genre, copies_sold_per_song), <span class="at">y =</span> copies_sold_per_song)) <span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Genre"</span>, <span class="at">y =</span> <span class="st">"Copies Sold per Song"</span>, <span class="at">title =</span> <span class="st">"Average Copies Sold per Song by Genre"</span>) <span class="sc">+</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a stacked bar chart across time of the count songs for each genre</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(songs_yearly_count_df, <span class="st">"column"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> year, <span class="at">y =</span> total_songs_released, <span class="at">group =</span> genre), <span class="at">stacking =</span> <span class="st">"normal"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="st">"Yearly Total Songs Released by Genre"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_yAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Songs Released"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_tooltip</span>(<span class="at">valueDecimals =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="highchart html-widget html-fill-item" id="htmlwidget-422be6c61dd9ef2a9d1b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-422be6c61dd9ef2a9d1b">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Yearly Total Songs Released by Genre"},"yAxis":{"title":{"text":"Total Songs Released"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}}},"series":[{"name":"Chillgaze","data":[{"year":2018,"genre":"Chillgaze","total_songs_released":211,"x":2018,"y":211},{"year":2019,"genre":"Chillgaze","total_songs_released":200,"x":2019,"y":200},{"year":2020,"genre":"Chillgaze","total_songs_released":199,"x":2020,"y":199},{"year":2021,"genre":"Chillgaze","total_songs_released":222,"x":2021,"y":222},{"year":2022,"genre":"Chillgaze","total_songs_released":207,"x":2022,"y":207}],"type":"column","stacking":"normal"},{"name":"Electroswing","data":[{"year":2018,"genre":"Electroswing","total_songs_released":159,"x":2018,"y":159},{"year":2019,"genre":"Electroswing","total_songs_released":157,"x":2019,"y":157},{"year":2020,"genre":"Electroswing","total_songs_released":143,"x":2020,"y":143},{"year":2021,"genre":"Electroswing","total_songs_released":147,"x":2021,"y":147},{"year":2022,"genre":"Electroswing","total_songs_released":155,"x":2022,"y":155}],"type":"column","stacking":"normal"},{"name":"Folktronica","data":[{"year":2018,"genre":"Folktronica","total_songs_released":817,"x":2018,"y":817},{"year":2019,"genre":"Folktronica","total_songs_released":707,"x":2019,"y":707},{"year":2020,"genre":"Folktronica","total_songs_released":661,"x":2020,"y":661},{"year":2021,"genre":"Folktronica","total_songs_released":653,"x":2021,"y":653},{"year":2022,"genre":"Folktronica","total_songs_released":582,"x":2022,"y":582}],"type":"column","stacking":"normal"},{"name":"Futuristicountry","data":[{"year":2018,"genre":"Futuristicountry","total_songs_released":59,"x":2018,"y":59},{"year":2019,"genre":"Futuristicountry","total_songs_released":50,"x":2019,"y":50},{"year":2020,"genre":"Futuristicountry","total_songs_released":41,"x":2020,"y":41},{"year":2021,"genre":"Futuristicountry","total_songs_released":49,"x":2021,"y":49},{"year":2022,"genre":"Futuristicountry","total_songs_released":49,"x":2022,"y":49}],"type":"column","stacking":"normal"},{"name":"Gothicsynth","data":[{"year":2018,"genre":"Gothicsynth","total_songs_released":167,"x":2018,"y":167},{"year":2019,"genre":"Gothicsynth","total_songs_released":163,"x":2019,"y":163},{"year":2020,"genre":"Gothicsynth","total_songs_released":130,"x":2020,"y":130},{"year":2021,"genre":"Gothicsynth","total_songs_released":159,"x":2021,"y":159},{"year":2022,"genre":"Gothicsynth","total_songs_released":151,"x":2022,"y":151}],"type":"column","stacking":"normal"},{"name":"Indiedisco","data":[{"year":2018,"genre":"Indiedisco","total_songs_released":34,"x":2018,"y":34},{"year":2019,"genre":"Indiedisco","total_songs_released":25,"x":2019,"y":25},{"year":2020,"genre":"Indiedisco","total_songs_released":23,"x":2020,"y":23},{"year":2021,"genre":"Indiedisco","total_songs_released":22,"x":2021,"y":22},{"year":2022,"genre":"Indiedisco","total_songs_released":20,"x":2022,"y":20}],"type":"column","stacking":"normal"},{"name":"Junglejazz","data":[{"year":2018,"genre":"Junglejazz","total_songs_released":13,"x":2018,"y":13},{"year":2019,"genre":"Junglejazz","total_songs_released":13,"x":2019,"y":13},{"year":2020,"genre":"Junglejazz","total_songs_released":11,"x":2020,"y":11},{"year":2021,"genre":"Junglejazz","total_songs_released":16,"x":2021,"y":16},{"year":2022,"genre":"Junglejazz","total_songs_released":19,"x":2022,"y":19}],"type":"column","stacking":"normal"},{"name":"Neoclassicalwave","data":[{"year":2018,"genre":"Neoclassicalwave","total_songs_released":28,"x":2018,"y":28},{"year":2019,"genre":"Neoclassicalwave","total_songs_released":33,"x":2019,"y":33},{"year":2020,"genre":"Neoclassicalwave","total_songs_released":33,"x":2020,"y":33},{"year":2021,"genre":"Neoclassicalwave","total_songs_released":30,"x":2021,"y":30},{"year":2022,"genre":"Neoclassicalwave","total_songs_released":29,"x":2022,"y":29}],"type":"column","stacking":"normal"},{"name":"Psychedelictrance","data":[{"year":2018,"genre":"Psychedelictrance","total_songs_released":243,"x":2018,"y":243},{"year":2019,"genre":"Psychedelictrance","total_songs_released":236,"x":2019,"y":236},{"year":2020,"genre":"Psychedelictrance","total_songs_released":225,"x":2020,"y":225},{"year":2021,"genre":"Psychedelictrance","total_songs_released":201,"x":2021,"y":201},{"year":2022,"genre":"Psychedelictrance","total_songs_released":191,"x":2022,"y":191}],"type":"column","stacking":"normal"},{"name":"Trip-pop","data":[{"year":2018,"genre":"Trip-pop","total_songs_released":24,"x":2018,"y":24},{"year":2019,"genre":"Trip-pop","total_songs_released":38,"x":2019,"y":38},{"year":2020,"genre":"Trip-pop","total_songs_released":31,"x":2020,"y":31},{"year":2021,"genre":"Trip-pop","total_songs_released":21,"x":2021,"y":21},{"year":2022,"genre":"Trip-pop","total_songs_released":26,"x":2022,"y":26}],"type":"column","stacking":"normal"}],"xAxis":{"type":"linear","title":{"text":"Year"}},"tooltip":{"valueDecimals":0}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate count of songs released by band in across all time </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>songs_band_count_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span>  </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(band_id) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_songs_released =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span>  </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_songs_released))</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot distribution of frequency on number of songs released at band level </span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(songs_band_count_df, <span class="fu">aes</span>(<span class="at">x =</span> total_songs_released)) <span class="sc">+</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Distribution of Frequency of Number of Songs Released by Band"</span>) <span class="sc">+</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-6-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate total count of unique bands</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>unique_bands_count <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">unique_bands =</span> <span class="fu">n_distinct</span>(band_id))</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if each band only produces the same genre of songs</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>band_genre_count <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(band_id) <span class="sc">%&gt;%</span> </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">unique_genres =</span> <span class="fu">n_distinct</span>(genre)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(unique_genres <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Check:</strong> To see if a feature needs to be created at the band level</p>
<p><strong>Result:</strong> As there is a strong positive skew, consider placing a categorical variable by binning bands based off their <code>copies_sold</code> if initial model results are poor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Total copies sold histogram </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(band_id) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_copies_sold =</span> <span class="fu">sum</span>(copies_sold)) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> total_copies_sold)) <span class="sc">+</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Total Copies Sold ($m)"</span>, <span class="at">y =</span> <span class="st">"Density"</span>, <span class="at">title =</span> <span class="st">"Distribution of Total Copies Sold per Band "</span>) <span class="sc">+</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of bands in each genre</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(genre) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num_bands =</span> <span class="fu">n_distinct</span>(band_id)) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(num_bands)) <span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(genre, num_bands), <span class="at">y =</span> num_bands)) <span class="sc">+</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Genre"</span>, <span class="at">y =</span> <span class="st">"Number of Bands"</span>, <span class="at">title =</span> <span class="st">"Number of Bands in Each Genre"</span>) <span class="sc">+</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="investigate-temporal-patterns-across-total-songs-and-songs-released-at-quarterly-and-yearly-frequency" class="level4">
<h4 class="anchored" data-anchor-id="investigate-temporal-patterns-across-total-songs-and-songs-released-at-quarterly-and-yearly-frequency">3.2 Investigate temporal patterns across total songs and songs released at quarterly and yearly frequency</h4>
<ul>
<li><p><code>Total_songs_released</code> and <code>total_copies_sold</code> are highly correlated at the quarterly frequency at ~0.95%. There if model B’s intent is forecasting consider using <code>Total_songs_released</code> instead.</p></li>
<li><p><code>copies_sold</code> variable shows a more pronounced downward trend than total songs released. This is suggestive that it represents the cumulative units sold since each song’s launch date. We assume that copies_sold is a cumulative sum of the copies sold since the release of the song.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot time series of total songs sold and songs released at the quarterly frequency</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>songs_quarterly_series_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_quarter =</span> <span class="fu">paste0</span>(<span class="fu">year</span>(date), <span class="st">"-Q"</span>, <span class="fu">quarter</span>(date))) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_quarter) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_songs_sold =</span> <span class="fu">sum</span>(copies_sold),</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_songs_released =</span> <span class="fu">n</span>())</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot time series of total songs sold and released at the quarterly frequency</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(songs_quarterly_series_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> year_quarter, <span class="at">y =</span> total_songs_sold)) <span class="sc">%&gt;%</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="st">"Quarterly Total Songs Sold and Released Over Time"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Year-Quarter"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_yAxis_multiples</span>(</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Songs Sold"</span>)),</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Songs Released"</span>), <span class="at">opposite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_add_series</span>(songs_quarterly_series_df<span class="sc">$</span>total_songs_released, <span class="at">name =</span> <span class="st">"Total Songs Released"</span>, <span class="at">type =</span> <span class="st">"line"</span>, <span class="at">yAxis =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="highchart html-widget html-fill-item" id="htmlwidget-e531c25ddb1ef3decd85" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e531c25ddb1ef3decd85">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Quarterly Total Songs Sold and Released Over Time"},"yAxis":[{"title":{"text":"Total Songs Sold"}},{"title":{"text":"Total Songs Released"},"opposite":true}],"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":false},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}}},"series":[{"group":"group","data":[{"year_quarter":"2018-Q1","total_songs_sold":385.896771200424,"total_songs_released":434,"y":385.896771200424,"name":"2018-Q1"},{"year_quarter":"2018-Q2","total_songs_sold":388.3569327459693,"total_songs_released":457,"y":388.3569327459693,"name":"2018-Q2"},{"year_quarter":"2018-Q3","total_songs_sold":398.9423015648841,"total_songs_released":455,"y":398.9423015648841,"name":"2018-Q3"},{"year_quarter":"2018-Q4","total_songs_sold":319.5259092023476,"total_songs_released":409,"y":319.5259092023476,"name":"2018-Q4"},{"year_quarter":"2019-Q1","total_songs_sold":342.21736648483,"total_songs_released":419,"y":342.21736648483,"name":"2019-Q1"},{"year_quarter":"2019-Q2","total_songs_sold":342.5654317223758,"total_songs_released":417,"y":342.5654317223758,"name":"2019-Q2"},{"year_quarter":"2019-Q3","total_songs_sold":306.2652951100865,"total_songs_released":386,"y":306.2652951100865,"name":"2019-Q3"},{"year_quarter":"2019-Q4","total_songs_sold":342.4463149478656,"total_songs_released":400,"y":342.4463149478656,"name":"2019-Q4"},{"year_quarter":"2020-Q1","total_songs_sold":300.3294271369825,"total_songs_released":359,"y":300.3294271369825,"name":"2020-Q1"},{"year_quarter":"2020-Q2","total_songs_sold":282.0305585210115,"total_songs_released":353,"y":282.0305585210115,"name":"2020-Q2"},{"year_quarter":"2020-Q3","total_songs_sold":300.7595109480594,"total_songs_released":397,"y":300.7595109480594,"name":"2020-Q3"},{"year_quarter":"2020-Q4","total_songs_sold":293.6986416986747,"total_songs_released":388,"y":293.6986416986747,"name":"2020-Q4"},{"year_quarter":"2021-Q1","total_songs_sold":294.4358580490004,"total_songs_released":379,"y":294.4358580490004,"name":"2021-Q1"},{"year_quarter":"2021-Q2","total_songs_sold":323.5043871792737,"total_songs_released":389,"y":323.5043871792737,"name":"2021-Q2"},{"year_quarter":"2021-Q3","total_songs_sold":304.0006432173129,"total_songs_released":383,"y":304.0006432173129,"name":"2021-Q3"},{"year_quarter":"2021-Q4","total_songs_sold":271.8209227059788,"total_songs_released":369,"y":271.8209227059788,"name":"2021-Q4"},{"year_quarter":"2022-Q1","total_songs_sold":301.689153102119,"total_songs_released":382,"y":301.689153102119,"name":"2022-Q1"},{"year_quarter":"2022-Q2","total_songs_sold":256.3726706495273,"total_songs_released":336,"y":256.3726706495273,"name":"2022-Q2"},{"year_quarter":"2022-Q3","total_songs_sold":242.326945843217,"total_songs_released":337,"y":242.326945843217,"name":"2022-Q3"},{"year_quarter":"2022-Q4","total_songs_sold":273.0124402982881,"total_songs_released":374,"y":273.0124402982881,"name":"2022-Q4"}],"type":"line"},{"data":[434,457,455,409,419,417,386,400,359,353,397,388,379,389,383,369,382,336,337,374],"name":"Total Songs Released","type":"line","yAxis":1}],"xAxis":{"type":"category","title":{"text":"Year-Quarter"}}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate correlation between total songs sold and total songs released at qtrly frequency </span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">cor</span>(songs_quarterly_series_df<span class="sc">$</span>total_songs_sold, songs_quarterly_series_df<span class="sc">$</span>total_songs_released))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9476143</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot time series of total songs sold at the yearly frequency</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>songs_yearly_series_df <span class="ot">&lt;-</span>cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">format</span>(date, <span class="st">"%Y"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_songs_sold =</span> <span class="fu">sum</span>(copies_sold),</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">total_songs_released =</span> <span class="fu">n</span>())</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the highcharter plot object</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(songs_yearly_series_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> year, <span class="at">y =</span> total_songs_sold)) <span class="sc">%&gt;%</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="st">"Yearly Total Songs Sold Over Time"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_yAxis_multiples</span>(</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Songs Sold"</span>)),</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Songs Released"</span>), <span class="at">opposite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_add_series</span>(songs_yearly_series_df<span class="sc">$</span>total_songs_released, <span class="at">name =</span> <span class="st">"Total Songs Released"</span>, <span class="at">type =</span> <span class="st">"line"</span>, <span class="at">yAxis =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="highchart html-widget html-fill-item" id="htmlwidget-c85cb6b06a030de5d81f" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-c85cb6b06a030de5d81f">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Yearly Total Songs Sold Over Time"},"yAxis":[{"title":{"text":"Total Songs Sold"}},{"title":{"text":"Total Songs Released"},"opposite":true}],"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":false},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}}},"series":[{"group":"group","data":[{"year":"2018","total_songs_sold":1492.721914713626,"total_songs_released":1755,"y":1492.721914713626,"name":"2018"},{"year":"2019","total_songs_sold":1333.494408265159,"total_songs_released":1622,"y":1333.494408265159,"name":"2019"},{"year":"2020","total_songs_sold":1176.818138304727,"total_songs_released":1497,"y":1176.818138304727,"name":"2020"},{"year":"2021","total_songs_sold":1193.761811151564,"total_songs_released":1520,"y":1193.761811151564,"name":"2021"},{"year":"2022","total_songs_sold":1073.401209893151,"total_songs_released":1429,"y":1073.401209893151,"name":"2022"}],"type":"line"},{"data":[1755,1622,1497,1520,1429],"name":"Total Songs Released","type":"line","yAxis":1}],"xAxis":{"type":"category","title":{"text":"Year"}}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot time series of total songs released by genre at the quarterly frequency</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>songs_genre_quarterly_series_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_quarter =</span> <span class="fu">paste0</span>(<span class="fu">year</span>(date), <span class="st">"-Q"</span>, <span class="fu">quarter</span>(date))) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_quarter, genre) <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_songs_released =</span> <span class="fu">n</span>())</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the highcharter plot object</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(songs_genre_quarterly_series_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> year_quarter, <span class="at">y =</span> total_songs_released, <span class="at">group =</span> genre)) <span class="sc">%&gt;%</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="st">"Quarterly Total Songs Released Over Time by Genre"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Year-Quarter"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_yAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Songs Released"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_tooltip</span>(<span class="at">valueDecimals =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_legend</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Genre"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="highchart html-widget html-fill-item" id="htmlwidget-bb20dea4c205032b3579" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-bb20dea4c205032b3579">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Quarterly Total Songs Released Over Time by Genre"},"yAxis":{"title":{"text":"Total Songs Released"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}}},"series":[{"name":"Chillgaze","data":[{"year_quarter":"2018-Q1","genre":"Chillgaze","total_songs_released":36,"y":36,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Chillgaze","total_songs_released":70,"y":70,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Chillgaze","total_songs_released":58,"y":58,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Chillgaze","total_songs_released":47,"y":47,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Chillgaze","total_songs_released":50,"y":50,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Chillgaze","total_songs_released":58,"y":58,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Chillgaze","total_songs_released":48,"y":48,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Chillgaze","total_songs_released":44,"y":44,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Chillgaze","total_songs_released":44,"y":44,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Chillgaze","total_songs_released":51,"y":51,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Chillgaze","total_songs_released":55,"y":55,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Chillgaze","total_songs_released":49,"y":49,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Chillgaze","total_songs_released":49,"y":49,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Chillgaze","total_songs_released":56,"y":56,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Chillgaze","total_songs_released":57,"y":57,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Chillgaze","total_songs_released":60,"y":60,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Chillgaze","total_songs_released":68,"y":68,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Chillgaze","total_songs_released":45,"y":45,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Chillgaze","total_songs_released":52,"y":52,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Chillgaze","total_songs_released":42,"y":42,"name":"2022-Q4"}],"type":"line"},{"name":"Electroswing","data":[{"year_quarter":"2018-Q1","genre":"Electroswing","total_songs_released":43,"y":43,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Electroswing","total_songs_released":34,"y":34,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Electroswing","total_songs_released":39,"y":39,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Electroswing","total_songs_released":43,"y":43,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Electroswing","total_songs_released":34,"y":34,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Electroswing","total_songs_released":37,"y":37,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Electroswing","total_songs_released":44,"y":44,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Electroswing","total_songs_released":42,"y":42,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Electroswing","total_songs_released":36,"y":36,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Electroswing","total_songs_released":37,"y":37,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Electroswing","total_songs_released":42,"y":42,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Electroswing","total_songs_released":28,"y":28,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Electroswing","total_songs_released":40,"y":40,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Electroswing","total_songs_released":36,"y":36,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Electroswing","total_songs_released":32,"y":32,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Electroswing","total_songs_released":39,"y":39,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Electroswing","total_songs_released":44,"y":44,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Electroswing","total_songs_released":30,"y":30,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Electroswing","total_songs_released":38,"y":38,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Electroswing","total_songs_released":43,"y":43,"name":"2022-Q4"}],"type":"line"},{"name":"Folktronica","data":[{"year_quarter":"2018-Q1","genre":"Folktronica","total_songs_released":226,"y":226,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Folktronica","total_songs_released":212,"y":212,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Folktronica","total_songs_released":202,"y":202,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Folktronica","total_songs_released":177,"y":177,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Folktronica","total_songs_released":187,"y":187,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Folktronica","total_songs_released":170,"y":170,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Folktronica","total_songs_released":172,"y":172,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Folktronica","total_songs_released":178,"y":178,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Folktronica","total_songs_released":165,"y":165,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Folktronica","total_songs_released":152,"y":152,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Folktronica","total_songs_released":167,"y":167,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Folktronica","total_songs_released":177,"y":177,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Folktronica","total_songs_released":161,"y":161,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Folktronica","total_songs_released":175,"y":175,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Folktronica","total_songs_released":172,"y":172,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Folktronica","total_songs_released":145,"y":145,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Folktronica","total_songs_released":151,"y":151,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Folktronica","total_songs_released":148,"y":148,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Folktronica","total_songs_released":131,"y":131,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Folktronica","total_songs_released":152,"y":152,"name":"2022-Q4"}],"type":"line"},{"name":"Futuristicountry","data":[{"year_quarter":"2018-Q1","genre":"Futuristicountry","total_songs_released":17,"y":17,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Futuristicountry","total_songs_released":19,"y":19,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Futuristicountry","total_songs_released":11,"y":11,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Futuristicountry","total_songs_released":12,"y":12,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Futuristicountry","total_songs_released":20,"y":20,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Futuristicountry","total_songs_released":15,"y":15,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Futuristicountry","total_songs_released":7,"y":7,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Futuristicountry","total_songs_released":8,"y":8,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Futuristicountry","total_songs_released":10,"y":10,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Futuristicountry","total_songs_released":9,"y":9,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Futuristicountry","total_songs_released":12,"y":12,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Futuristicountry","total_songs_released":10,"y":10,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Futuristicountry","total_songs_released":20,"y":20,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Futuristicountry","total_songs_released":9,"y":9,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Futuristicountry","total_songs_released":9,"y":9,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Futuristicountry","total_songs_released":11,"y":11,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Futuristicountry","total_songs_released":7,"y":7,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Futuristicountry","total_songs_released":14,"y":14,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Futuristicountry","total_songs_released":11,"y":11,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Futuristicountry","total_songs_released":17,"y":17,"name":"2022-Q4"}],"type":"line"},{"name":"Gothicsynth","data":[{"year_quarter":"2018-Q1","genre":"Gothicsynth","total_songs_released":36,"y":36,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Gothicsynth","total_songs_released":48,"y":48,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Gothicsynth","total_songs_released":44,"y":44,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Gothicsynth","total_songs_released":39,"y":39,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Gothicsynth","total_songs_released":45,"y":45,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Gothicsynth","total_songs_released":45,"y":45,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Gothicsynth","total_songs_released":36,"y":36,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Gothicsynth","total_songs_released":37,"y":37,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Gothicsynth","total_songs_released":33,"y":33,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Gothicsynth","total_songs_released":33,"y":33,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Gothicsynth","total_songs_released":32,"y":32,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Gothicsynth","total_songs_released":32,"y":32,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Gothicsynth","total_songs_released":38,"y":38,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Gothicsynth","total_songs_released":35,"y":35,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Gothicsynth","total_songs_released":43,"y":43,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Gothicsynth","total_songs_released":43,"y":43,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Gothicsynth","total_songs_released":41,"y":41,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Gothicsynth","total_songs_released":33,"y":33,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Gothicsynth","total_songs_released":37,"y":37,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Gothicsynth","total_songs_released":40,"y":40,"name":"2022-Q4"}],"type":"line"},{"name":"Indiedisco","data":[{"year_quarter":"2018-Q1","genre":"Indiedisco","total_songs_released":7,"y":7,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Indiedisco","total_songs_released":7,"y":7,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Indiedisco","total_songs_released":10,"y":10,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Indiedisco","total_songs_released":10,"y":10,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Indiedisco","total_songs_released":6,"y":6,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Indiedisco","total_songs_released":9,"y":9,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Indiedisco","total_songs_released":6,"y":6,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Indiedisco","total_songs_released":4,"y":4,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Indiedisco","total_songs_released":4,"y":4,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Indiedisco","total_songs_released":7,"y":7,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Indiedisco","total_songs_released":3,"y":3,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Indiedisco","total_songs_released":9,"y":9,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Indiedisco","total_songs_released":11,"y":11,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Indiedisco","total_songs_released":7,"y":7,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Indiedisco","total_songs_released":1,"y":1,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Indiedisco","total_songs_released":3,"y":3,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Indiedisco","total_songs_released":5,"y":5,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Indiedisco","total_songs_released":5,"y":5,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Indiedisco","total_songs_released":7,"y":7,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Indiedisco","total_songs_released":3,"y":3,"name":"2022-Q4"}],"type":"line"},{"name":"Junglejazz","data":[{"year_quarter":"2018-Q1","genre":"Junglejazz","total_songs_released":2,"y":2,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Junglejazz","total_songs_released":2,"y":2,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Junglejazz","total_songs_released":3,"y":3,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Junglejazz","total_songs_released":6,"y":6,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Junglejazz","total_songs_released":2,"y":2,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Junglejazz","total_songs_released":4,"y":4,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Junglejazz","total_songs_released":3,"y":3,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Junglejazz","total_songs_released":4,"y":4,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Junglejazz","total_songs_released":2,"y":2,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Junglejazz","total_songs_released":2,"y":2,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Junglejazz","total_songs_released":4,"y":4,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Junglejazz","total_songs_released":3,"y":3,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Junglejazz","total_songs_released":4,"y":4,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Junglejazz","total_songs_released":3,"y":3,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Junglejazz","total_songs_released":7,"y":7,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Junglejazz","total_songs_released":2,"y":2,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Junglejazz","total_songs_released":6,"y":6,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Junglejazz","total_songs_released":4,"y":4,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Junglejazz","total_songs_released":3,"y":3,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Junglejazz","total_songs_released":6,"y":6,"name":"2022-Q4"}],"type":"line"},{"name":"Neoclassicalwave","data":[{"year_quarter":"2018-Q1","genre":"Neoclassicalwave","total_songs_released":9,"y":9,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Neoclassicalwave","total_songs_released":6,"y":6,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Neoclassicalwave","total_songs_released":4,"y":4,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Neoclassicalwave","total_songs_released":9,"y":9,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Neoclassicalwave","total_songs_released":4,"y":4,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Neoclassicalwave","total_songs_released":12,"y":12,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Neoclassicalwave","total_songs_released":5,"y":5,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Neoclassicalwave","total_songs_released":12,"y":12,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Neoclassicalwave","total_songs_released":9,"y":9,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Neoclassicalwave","total_songs_released":7,"y":7,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Neoclassicalwave","total_songs_released":10,"y":10,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Neoclassicalwave","total_songs_released":7,"y":7,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Neoclassicalwave","total_songs_released":9,"y":9,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Neoclassicalwave","total_songs_released":6,"y":6,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Neoclassicalwave","total_songs_released":9,"y":9,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Neoclassicalwave","total_songs_released":6,"y":6,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Neoclassicalwave","total_songs_released":9,"y":9,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Neoclassicalwave","total_songs_released":4,"y":4,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Neoclassicalwave","total_songs_released":4,"y":4,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Neoclassicalwave","total_songs_released":12,"y":12,"name":"2022-Q4"}],"type":"line"},{"name":"Psychedelictrance","data":[{"year_quarter":"2018-Q1","genre":"Psychedelictrance","total_songs_released":50,"y":50,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Psychedelictrance","total_songs_released":49,"y":49,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Psychedelictrance","total_songs_released":79,"y":79,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Psychedelictrance","total_songs_released":65,"y":65,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Psychedelictrance","total_songs_released":60,"y":60,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Psychedelictrance","total_songs_released":61,"y":61,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Psychedelictrance","total_songs_released":57,"y":57,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Psychedelictrance","total_songs_released":58,"y":58,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Psychedelictrance","total_songs_released":48,"y":48,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Psychedelictrance","total_songs_released":49,"y":49,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Psychedelictrance","total_songs_released":63,"y":63,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Psychedelictrance","total_songs_released":65,"y":65,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Psychedelictrance","total_songs_released":43,"y":43,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Psychedelictrance","total_songs_released":55,"y":55,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Psychedelictrance","total_songs_released":49,"y":49,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Psychedelictrance","total_songs_released":54,"y":54,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Psychedelictrance","total_songs_released":42,"y":42,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Psychedelictrance","total_songs_released":50,"y":50,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Psychedelictrance","total_songs_released":49,"y":49,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Psychedelictrance","total_songs_released":50,"y":50,"name":"2022-Q4"}],"type":"line"},{"name":"Trip-pop","data":[{"year_quarter":"2018-Q1","genre":"Trip-pop","total_songs_released":8,"y":8,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Trip-pop","total_songs_released":10,"y":10,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Trip-pop","total_songs_released":5,"y":5,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Trip-pop","total_songs_released":1,"y":1,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Trip-pop","total_songs_released":11,"y":11,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Trip-pop","total_songs_released":6,"y":6,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Trip-pop","total_songs_released":8,"y":8,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Trip-pop","total_songs_released":13,"y":13,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Trip-pop","total_songs_released":8,"y":8,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Trip-pop","total_songs_released":6,"y":6,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Trip-pop","total_songs_released":9,"y":9,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Trip-pop","total_songs_released":8,"y":8,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Trip-pop","total_songs_released":4,"y":4,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Trip-pop","total_songs_released":7,"y":7,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Trip-pop","total_songs_released":4,"y":4,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Trip-pop","total_songs_released":6,"y":6,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Trip-pop","total_songs_released":9,"y":9,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Trip-pop","total_songs_released":3,"y":3,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Trip-pop","total_songs_released":5,"y":5,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Trip-pop","total_songs_released":9,"y":9,"name":"2022-Q4"}],"type":"line"}],"xAxis":{"type":"category","title":{"text":"Year-Quarter"}},"tooltip":{"valueDecimals":0},"legend":{"title":{"text":"Genre"}}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="investigate-whether-seasonality-exists-at-the-weekly-monthly-or-quarterly-level-for-our-target" class="level4">
<h4 class="anchored" data-anchor-id="investigate-whether-seasonality-exists-at-the-weekly-monthly-or-quarterly-level-for-our-target">3.3 Investigate whether seasonality exists at the weekly, monthly or quarterly level for our target</h4>
<p><strong>Objective:</strong> To determine the importance of including seasonal dummy variables in the models, we create seasonal plots of <code>`songs_released`</code> at different frequencies.</p>
<p><strong>Findings:</strong> The seasonal plots do not provide strong visual evidence of seasonality in the <code>`songs_released`</code> variable. It is worth noting that there is a dip in week 53, which can be attributed to the relatively fewer number of rows corresponding to that week.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the seasonal plots at the weekly, monthly and quarterly level for all the years </span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add columns for week, quarter, month and year </span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>songs_time_index_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span>  </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date), </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">quarter =</span> <span class="fu">quarter</span>(date),</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">month =</span> <span class="fu">month</span>(date),</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">week =</span> <span class="fu">week</span>(date))</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the frequencies and their corresponding columns</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>frequencies <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"week"</span>, <span class="st">"month"</span>, <span class="st">"quarter"</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>frequency_cols <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">week =</span> <span class="st">"week"</span>, <span class="at">month =</span> <span class="st">"month"</span>, <span class="at">quarter =</span> <span class="st">"quarter"</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each frequency and generate plots</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (freq <span class="cf">in</span> frequencies) {</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  col_name <span class="ot">&lt;-</span> frequency_cols[[freq]]</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Aggregate data at the current frequency</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>  aggregated_data <span class="ot">&lt;-</span> songs_time_index_df <span class="sc">%&gt;%</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, <span class="sc">!!</span><span class="fu">sym</span>(col_name)) <span class="sc">%&gt;%</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">songs_released =</span> <span class="fu">n</span>())</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generate plot for the current frequency</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">hchart</span>(aggregated_data, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> <span class="sc">!!</span><span class="fu">sym</span>(col_name), <span class="at">y =</span>  songs_released, <span class="at">group =</span> year)) <span class="sc">%&gt;%</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_colors</span>(<span class="at">colors =</span> <span class="fu">viridis</span>(<span class="fu">length</span>(<span class="fu">unique</span>(aggregated_data<span class="sc">$</span>year)))) <span class="sc">%&gt;%</span></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="fu">paste</span>(<span class="fu">toupper</span>(freq), <span class="st">"Total Songs Released by Year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="fu">toupper</span>(freq)),</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>             <span class="at">labels =</span> <span class="fu">list</span>(<span class="at">step =</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_yAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Copies Sold"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_legend</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Year"</span>)) </span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print the plot</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-for-temporal-patterns-across-the-continuous-features" class="level4">
<h4 class="anchored" data-anchor-id="check-for-temporal-patterns-across-the-continuous-features">3.4 Check for temporal patterns across the continuous features</h4>
<p>Findings:</p>
<ul>
<li><p>All series appears to be quite stable across time where <code>total_energy</code>, <code>total_loudness</code> exhibit a slight downward trend.</p></li>
<li><p>All series exhibit a uptick at towards the end of the time series</p></li>
<li><p>There is high correlation among the features at every frequency.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggreate target and features at each frequency and plot </span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Create time series df at the monthly frequency</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>features_weekly_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">format</span>(date, <span class="st">"%Y-%W"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">songs_released =</span> <span class="fu">n</span>(),</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_loudness =</span> <span class="fu">sum</span>(loudness),</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_energy =</span> <span class="fu">sum</span>(energy),</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_length =</span> <span class="fu">sum</span>(length)) <span class="sc">%&gt;%</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date) </span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create time series df at the monthly frequency</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>features_monthly_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">format</span>(date, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">songs_released =</span> <span class="fu">n</span>(),</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_loudness =</span> <span class="fu">sum</span>(loudness),</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_energy =</span> <span class="fu">sum</span>(energy),</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_length =</span> <span class="fu">sum</span>(length)) <span class="sc">%&gt;%</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date) </span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Create time series df at the quarterly frequency</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>features_quarterly_df <span class="ot">&lt;-</span>cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">paste0</span>(<span class="fu">year</span>(date), <span class="st">"-Q"</span>, <span class="fu">quarter</span>(date))) <span class="sc">%&gt;%</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">songs_released =</span> <span class="fu">n</span>(),</span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_loudness =</span> <span class="fu">sum</span>(loudness),</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_energy =</span> <span class="fu">sum</span>(energy),</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_length =</span> <span class="fu">sum</span>(length)) <span class="sc">%&gt;%</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date)</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list to store the dataframes</span></span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>features_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">weekly =</span> features_weekly_df,</span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">monthly =</span> features_monthly_df,</span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">quarterly =</span> features_quarterly_df</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through the frequencies and create the plots</span></span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (freq <span class="cf">in</span> <span class="fu">names</span>(features_list)) {</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a>  features_df <span class="ot">&lt;-</span> features_list[[freq]]  <span class="co"># Corrected variable name</span></span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">hchart</span>(features_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> date, <span class="at">y =</span> total_loudness), <span class="at">name =</span> <span class="st">"Total Loudness"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_add_series</span>(features_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> date, <span class="at">y =</span> total_energy), <span class="at">name =</span> <span class="st">"Total Energy"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_add_series</span>(features_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> date, <span class="at">y =</span> total_length), <span class="at">yAxis =</span> <span class="dv">1</span>, <span class="at">name =</span> <span class="st">"Total Length"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_add_series</span>(features_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> date, <span class="at">y =</span> <span class="dv">10</span><span class="sc">*</span>songs_released), <span class="at">yAxis =</span> <span class="dv">1</span>, <span class="at">name =</span> <span class="st">"Songs_released"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="fu">paste</span>(<span class="st">"Features and target"</span>, freq)) <span class="sc">%&gt;%</span></span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Date"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_yAxis_multiples</span>(<span class="fu">list</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Loudness and Energy"</span>),</span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>                            <span class="at">opposite =</span> <span class="cn">FALSE</span>),</span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">list</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Length and Songs Released"</span>),</span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>                            <span class="at">opposite =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_tooltip</span>(<span class="at">valueDecimals =</span> <span class="dv">0</span>)</span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visually-verify-the-stability-of-the-variables-distributions-across-time" class="level4">
<h4 class="anchored" data-anchor-id="visually-verify-the-stability-of-the-variables-distributions-across-time">3.5 Visually verify the stability of the variables’ distributions across time</h4>
<ul>
<li>To determine if the distributions of the continuous features are stable across the years, we generate violin of the continuous features for each year.</li>
<li>The distributions of all features appear stable over time, with little evidence of non-stationarity, which could potentially pose challenges during the modeling process.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"copies_sold"</span>,<span class="st">"length"</span>,<span class="st">"energy"</span>,<span class="st">"loudness"</span>) </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>aggregate_variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"total_copies_sold"</span>,<span class="st">"total_length"</span>,<span class="st">"total_energy"</span>,<span class="st">"total_loudness"</span>) </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the smoothed distributions of the continuous features for each year </span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (vars <span class="cf">in</span> variables) {</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(cleaned_songs_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="sc">!!</span><span class="fu">sym</span>(vars), <span class="at">fill =</span> <span class="fu">as.factor</span>(<span class="fu">year</span>(date)))) <span class="sc">+</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste</span>(<span class="st">"Density plot of"</span>, vars)) <span class="sc">+</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-11-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-11-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="investigate-the-relationship-among-the-features-and-the-target-variable" class="level4">
<h4 class="anchored" data-anchor-id="investigate-the-relationship-among-the-features-and-the-target-variable">3.5 Investigate the relationship among the features and the target variable</h4>
<p><strong>Check:</strong> Investigate the correlation among features to understand feature importance.</p>
<p><strong>Findings</strong>:</p>
<ol type="1">
<li><p>The correlation among features appears to be low at the song level but high when aggregated at the weekly level.</p>
<ul>
<li><p>For Model A, which focuses on individual songs, we need to model at the song level.</p></li>
<li><p>For Model B, which focuses on song genres, if modeling at the weekly frequency for forecasting consider regularization or removing a feature to account for high multicollinearity.</p></li>
</ul></li>
<li><p>The ‘length’ feature exhibits low correlation with the target variable ‘copies_sold’ and other features at the song level.</p></li>
<li><p>There is a negative relationship between ‘copies_sold’ and ‘length’ and ‘loudness’ at the song level. However, ‘energy’ shows a positive relationship with ‘copies_sold’ at the song level.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate correlation matrix for continuous variables at different levels</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation matrix at the song level </span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>correlation_matrix_song_level <span class="ot">&lt;-</span> <span class="fu">cor</span>(cleaned_songs_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(variables)))</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot correlation matrices </span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcorrplot</span>(correlation_matrix_song_level, <span class="at">hc.order =</span> <span class="cn">TRUE</span>, <span class="at">type =</span> <span class="st">"upper"</span>,<span class="at">lab =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the variables and their corresponding labels</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>plot_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"energy"</span>, <span class="st">"length"</span>, <span class="st">"loudness"</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Energy"</span>, <span class="st">"Length"</span>, <span class="st">"Loudness"</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through the variables and create the scatter plots</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(plot_vars)) {</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> plot_vars[i]</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  label <span class="ot">&lt;-</span> labels[i]</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> cleaned_songs_df <span class="sc">%&gt;%</span>  <span class="fu">sample_n</span>(<span class="dv">2000</span>),</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">x =</span> <span class="sc">!!</span><span class="fu">sym</span>(var), <span class="at">y =</span> copies_sold, <span class="at">color =</span> genre, </span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>                     <span class="co">#size = days_since_launch</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>                     )) <span class="sc">+</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> label, <span class="at">y =</span> <span class="st">"Copies Sold"</span>, <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Scatter Plot of"</span>, label, <span class="st">"vs. Copies Sold"</span>)) <span class="sc">+</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.box =</span> <span class="st">"vertical"</span>,</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.box.margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"cm"</span>),</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">1</span>), <span class="st">"cm"</span>)</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, <span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">3</span>)))</span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-12-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-12-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="investigate-to-existence-of-interaction-effects-between-features-and-target-variable" class="level4">
<h4 class="anchored" data-anchor-id="investigate-to-existence-of-interaction-effects-between-features-and-target-variable">3.6 Investigate to existence of interaction effects between features and target variable</h4>
<p><strong>Check:</strong> Whether there is an interaction <code>energy</code> and <code>loudness</code> with <code>length</code> to <code>copies_sold</code>. Rationale: A song that is high energy/loud that is long may cause fatigue in listeners reducing copies sold.</p>
<p>The interaction plot provides visual evidence of interaction effect being present at energy and loudness. Considering testing interaction variables in a regression framework, or use a random forest regression to automatically capture interaction effects.</p>
<p><strong>Findings:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating quartile bins for energy, loudness and length</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>interaction_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">energy_bin =</span> <span class="fu">ntile</span>(energy, <span class="dv">4</span>),</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">loudness_bin =</span> <span class="fu">ntile</span>(loudness, <span class="dv">4</span>),</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">length_bin =</span> <span class="fu">ntile</span>(length, <span class="dv">4</span>))</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the interaction plot for loudness and energy</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="fu">interaction.plot</span>(<span class="at">x.factor =</span> interaction_df<span class="sc">$</span>loudness_bin,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trace.factor =</span> interaction_df<span class="sc">$</span>length_bin,</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">response =</span> interaction_df<span class="sc">$</span>copies_sold,</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fun =</span> mean,</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type =</span> <span class="st">"b"</span>,</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">xlab =</span> <span class="st">"Loudness"</span>,</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"purple"</span>),</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>                 <span class="at">ylab =</span> <span class="st">"Copies_sold"</span>,</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>                 <span class="at">legend =</span> <span class="cn">TRUE</span>,</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trace.label =</span> <span class="st">"Length"</span>,</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>                 <span class="at">main =</span> <span class="st">"Interaction Plot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the interaction plot for energy and length #</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">interaction.plot</span>(<span class="at">x.factor =</span> interaction_df<span class="sc">$</span>energy_bin,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trace.factor =</span> <span class="fu">as.factor</span>(interaction_df<span class="sc">$</span>length_bin),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">response =</span> interaction_df<span class="sc">$</span>copies_sold,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fun =</span> mean,</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type =</span> <span class="st">"b"</span>,</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">xlab =</span> <span class="st">"Energy"</span>,</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"purple"</span>),</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">ylab =</span> <span class="st">"Copies_sold"</span>,</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">legend =</span> <span class="cn">TRUE</span>,</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trace.label =</span> <span class="st">"Length"</span>,</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">main =</span> <span class="st">"Interaction Plot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-13-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="feature-engineering" class="level3">
<h3 class="anchored" data-anchor-id="feature-engineering">4.0 Feature engineering</h3>
<p>We build the data set for models by creating the following features to experiment with (not-exhaustive):</p>
<ul>
<li><code>log_y</code>: Log transformation of the target variable <code>copies_sold</code> given it’s log-normal distribution</li>
<li><code>days_since_release</code>: Day since release date of song</li>
<li>One hot encoding of the genre column</li>
<li><code>interacion_loudness_length</code>: Interaction between energy and loudness</li>
<li><code>interaction_energy_length</code>: Interaction between energy and length</li>
<li><code>trend</code>: A trend variable corresponding to the days since start of data set</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume record day of the data set</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  record_date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">'2023-01-01'</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create input data frame to experiment for model building </span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>model_input_df<span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.Date</span>(date),</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">days_since_release =</span> <span class="fu">as.integer</span>(<span class="fu">difftime</span>(record_date, date, <span class="at">units =</span> <span class="st">"days"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create day trend variable</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trend =</span> <span class="fu">as.integer</span>(<span class="fu">difftime</span>(date, <span class="fu">min</span>(date), <span class="at">units =</span> <span class="st">"days"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create one hot encoding for the genre column</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> genre, <span class="at">values_from =</span> value, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create interaction features</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">interaction_loudness_length =</span> loudness <span class="sc">*</span> length,</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">interaction_energy_length =</span> energy <span class="sc">*</span> length) <span class="sc">%&gt;%</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create log transformation of the target variable</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_copies_sold =</span> <span class="fu">log</span>(copies_sold)) </span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>model_input_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7,823 × 23
   band_id song_id date       loudness length energy copies_sold
     &lt;int&gt;   &lt;int&gt; &lt;date&gt;        &lt;int&gt;  &lt;dbl&gt;  &lt;int&gt;       &lt;dbl&gt;
 1     808    6534 2018-01-01       79   3.35    137       0.391
 2    1143    9234 2018-01-01       78   4.91     86       0.543
 3    1263   10168 2018-01-01       99   5.89    159       0.723
 4     744    6017 2018-01-01       92   5.64    143       0.974
 5     606    4805 2018-01-01       72   5.84    144       1.09 
 6    1022    8189 2018-01-01       71   3.65     85       1.34 
 7     807    6514 2018-01-01       79   4.76    156       1.80 
 8     609    4844 2018-01-02       88   6.66    115       0.147
 9     679    5437 2018-01-02       85   2.33    145       0.438
10      98     772 2018-01-03       68   4.79    138       0.156
# ℹ 7,813 more rows
# ℹ 16 more variables: is_missing_energy &lt;lgl&gt;, days_since_release &lt;int&gt;,
#   trend &lt;int&gt;, Psychedelictrance &lt;dbl&gt;, Gothicsynth &lt;dbl&gt;, Indiedisco &lt;dbl&gt;,
#   Folktronica &lt;dbl&gt;, `Trip-pop` &lt;dbl&gt;, Futuristicountry &lt;dbl&gt;,
#   Electroswing &lt;dbl&gt;, Chillgaze &lt;dbl&gt;, Neoclassicalwave &lt;dbl&gt;,
#   Junglejazz &lt;dbl&gt;, interaction_loudness_length &lt;dbl&gt;,
#   interaction_energy_length &lt;dbl&gt;, log_copies_sold &lt;dbl&gt;</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>