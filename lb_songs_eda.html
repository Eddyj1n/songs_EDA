<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lifeblood Take-home Assignment</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="lb_songs_eda_files/libs/clipboard/clipboard.min.js"></script>
<script src="lb_songs_eda_files/libs/quarto-html/quarto.js"></script>
<script src="lb_songs_eda_files/libs/quarto-html/popper.min.js"></script>
<script src="lb_songs_eda_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lb_songs_eda_files/libs/quarto-html/anchor.min.js"></script>
<link href="lb_songs_eda_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lb_songs_eda_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lb_songs_eda_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lb_songs_eda_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lb_songs_eda_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="lb_songs_eda_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="lb_songs_eda_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="lb_songs_eda_files/libs/jquery-3.5.1/jquery.min.js"></script>
<script src="lb_songs_eda_files/libs/proj4js-2.3.15/proj4.js"></script>
<link href="lb_songs_eda_files/libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/highcharts.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/highcharts-3d.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/highcharts-more.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/stock.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/map.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/data.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/exporting.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/offline-exporting.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/drilldown.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/item-series.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/annotations.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/export-data.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/funnel.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/heatmap.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/treemap.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/sankey.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/dependency-wheel.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/organization.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/solid-gauge.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/streamgraph.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/sunburst.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/vector.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/wordcloud.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/xrange.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/tilemap.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/venn.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/gantt.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/timeline.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/bullet.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/coloraxis.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/dumbbell.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/lollipop.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/series-label.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/plugins/motion.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/custom/reset.js"></script>
<script src="lb_songs_eda_files/libs/highcharts-9.3.1/modules/boost.js"></script>
<script src="lb_songs_eda_files/libs/highchart-binding-0.9.4/highchart.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lifeblood Take-home Assignment</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="overall-approach-executive-summary" class="level4">
<h4 class="anchored" data-anchor-id="overall-approach-executive-summary">Overall Approach (Executive Summary)</h4>
<p>The exploratory data analysis (EDA) is conducted to motivate the model building process. Based on the EDA, the two models are proposed to balance between the complexity to solve the problem and the ease of bringing the model to production.</p>
<p>For <strong>Model A</strong>: - Assuming we are to predict the whether a <em>new</em> song will sell more than two million copies we run a random forest regression where <code>copies_sold</code> is the target and the features are:</p>
<ul>
<li><p><code>loudness</code>, <code>energy</code>, <code>length</code></p></li>
<li><p>one-hot encoding of <code>genre</code></p></li>
<li><p><code>days_since_launch_date</code> (new feature)</p></li>
</ul>
<p>For <strong>Model B</strong> - Assuming the model is to evaluate the popularity of a genre over sequential time periods <em>historically</em> and <strong>not</strong> used to forecast future popularity (which will require a time-series approach). Based off the EDA we can use multivariate regression specified below.</p>
<p><span id="eq-1"><span class="math display">\[
y\_{it} = \beta\_0 + \beta\_1 X\_{it1} + \beta\_2 X\_{it2} + \dots + \beta\_k X\_{itk} + \alpha\_g + Y_d + \epsilon\_{it}
\tag{1}\]</span></span></p>
<p>Where <span class="math inline">\(y\_{it}\)</span> is the copies sold for song <span class="math inline">\(i\)</span> in genre <span class="math inline">\(g\)</span> at time <span class="math inline">\(t\)</span>, <span class="math inline">\(X\_{it}\)</span> are the features, <span class="math inline">\(\alpha\_g\)</span> is the genre fixed effect, <span class="math inline">\(\Y_d\)</span> is the time fixed effect for each year, and <span class="math inline">\(\epsilon\_{it}\)</span> is the error term.</p>
<p>Consideration: Using song-level data at the level may result in too much noise, can aggregate at weekly level to run panel model. A mixed-effects model can be explored to capture the hierarchical structure of data, however EDA suggests there may insufficient observations at the band level.</p>
<p><strong>Data Assumptions</strong>:</p>
<ul>
<li><code>copies_sold</code> is the amount sold since release date recorded at the end of the data set.</li>
</ul>
</section>
<section id="import-data-and-load-required-packages" class="level4">
<h4 class="anchored" data-anchor-id="import-data-and-load-required-packages">1. Import data and load required packages</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install pacman if not already installed</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: pacman</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clear workspace </span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the required packages using pacman</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse,ggplot2, psych, ggcorrplot, highcharter,plotly,viridis)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data set and parse date column as date objects </span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>songs_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/lifeblood_interview_dataset.csv"</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.Date</span>(date))</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Check information of data frame </span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(songs_df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  band_id             genre song_id       date loudness   length energy
1     808 Psychedelictrance    6534 2018-01-01       79 3.345114    137
2    1143       Gothicsynth    9234 2018-01-01       78 4.912700     86
3    1263        Indiedisco   10168 2018-01-01       99 5.889923    159
4     744       Folktronica    6017 2018-01-01       92 5.639068    143
5     606          Trip-pop    4805 2018-01-01       72 5.837072    144
6    1022  Futuristicountry    8189 2018-01-01       71 3.652508     85
  copies_sold
1   0.3905431
2   0.5425426
3   0.7230729
4   0.9736569
5   1.0930296
6   1.3378089</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">str</span>(songs_df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   10458 obs. of  8 variables:
 $ band_id    : int  808 1143 1263 744 606 1022 807 446 833 861 ...
 $ genre      : chr  "Psychedelictrance" "Gothicsynth" "Indiedisco" "Folktronica" ...
 $ song_id    : int  6534 9234 10168 6017 4805 8189 6514 3577 6719 6955 ...
 $ date       : Date, format: "2018-01-01" "2018-01-01" ...
 $ loudness   : int  79 78 99 92 72 71 79 73 118 106 ...
 $ length     : num  3.35 4.91 5.89 5.64 5.84 ...
 $ energy     : int  137 86 159 143 144 85 156 NA NA NA ...
 $ copies_sold: num  0.391 0.543 0.723 0.974 1.093 ...
NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-preprocessing-check-for-duplicates" class="level4">
<h4 class="anchored" data-anchor-id="data-preprocessing-check-for-duplicates">1.1 Data preprocessing: Check for Duplicates</h4>
<ul>
<li>From inspection there appears to be 205 duplicates of songs</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assert if unique count of songs matches number of rows </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">nrow</span>(songs_df) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">unique</span>(songs_df)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">length</span>(<span class="fu">unique</span>(songs_df<span class="sc">$</span>songs_id)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Duplicate songs exist, return the rows with the duplicate songs </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>duplicate_songs_df  <span class="ot">&lt;-</span> songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">duplicated</span>(song_id) <span class="sc">|</span> <span class="fu">duplicated</span>(song_id, <span class="at">fromLast=</span> <span class="cn">TRUE</span> ))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify these songs are exact duplicates by checking other columns match the duplicates</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>duplicate_songs_df_verified <span class="ot">&lt;-</span> duplicate_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(song_id) <span class="sc">%&gt;%</span> </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#If all columns have a distinct count of 1 for a particular song_id, it indicates that the duplicate songs are exact duplicates across all columns.</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">n_distinct</span>(.)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-preprocessing-check-for-missing-values" class="level4">
<h4 class="anchored" data-anchor-id="data-preprocessing-check-for-missing-values">1.1 Data preprocessing: Check for missing values</h4>
<p>There are 2329 missing values for energy in column. We make the assumption that these random values are completely missing at random (MCAR)</p>
<p>For future exploration, employ statistical test or ask data owner whether the missing values are missing at random (MAR), missing completely at random (MCAR), or missing not at random (MNAR).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of NULL and NA values column wise </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>missing_values_df <span class="ot">&lt;-</span> songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_all</span>(<span class="sc">~</span><span class="fu">sum</span>(<span class="fu">is.na</span>(.)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-preprocessinge-check-for-outliers" class="level4">
<h4 class="anchored" data-anchor-id="data-preprocessinge-check-for-outliers">1.1 Data preprocessinge: Check for outliers</h4>
<p>We first remove duplicate values and remove missing values given our MCAR assumption. Then plot the distributions of each feature.</p>
<p>From visually inspecting the distributions, there appears to be negative observations in the ‘length’ variable which is physically impossible. Assuming this a data error, we remove these values moving forward. Again, with more time we can impute these incorrect values or ask the data owner for clarification.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicates and missing values</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>cleaned_songs_df <span class="ot">&lt;-</span> songs_df <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(energy))</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the smoothed distribution of continuous variables  </span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"copies_sold"</span>, <span class="st">"length"</span>, <span class="st">"energy"</span>, <span class="st">"loudness"</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (vars <span class="cf">in</span> variables) {</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(cleaned_songs_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="sc">!!</span><span class="fu">sym</span>(vars))) <span class="sc">+</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste</span>(<span class="st">"Density plot of"</span>, vars)) <span class="sc">+</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-4-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-4-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter length rows to contain values greater than 0 </span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>cleaned_songs_df <span class="ot">&lt;-</span>cleaned_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(length <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exploratory-data-analysis-calculate-summary-statistics" class="level4">
<h4 class="anchored" data-anchor-id="exploratory-data-analysis-calculate-summary-statistics">2.0 Exploratory data analysis: Calculate summary statistics</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate summary statistics for continuous variable and return data frame </span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(cleaned_songs_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(variables))) <span class="sc">%&gt;%</span>  </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mean, median, min, max, range, sd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              mean median   min    max  range    sd
copies_sold   0.80   0.60  0.05   5.68   5.63  0.68
length        4.99   4.65  0.22  17.45  17.23  2.07
energy      131.31 131.00 30.00 238.00 208.00 26.56
loudness     85.19  86.00 12.00 162.00 150.00 19.20</code></pre>
</div>
</div>
</section>
<section id="exploratory-data-analysis-investigate-temporal-patterns-across-total-songs-at-quarterly-and-yearly-frequency-to-motivate-what-temporal-features-to-include" class="level4">
<h4 class="anchored" data-anchor-id="exploratory-data-analysis-investigate-temporal-patterns-across-total-songs-at-quarterly-and-yearly-frequency-to-motivate-what-temporal-features-to-include">2.1 Exploratory data analysis: Investigate temporal patterns across total songs at quarterly and yearly frequency to motivate what temporal features to include</h4>
<p>A key observation there is a overall downward trend in the total amount of copies sold. This suggests <code>copies_sold</code> reflect the units sold since launch date of song. From here we assume the <code>copies_sold</code> variable is a cumulative sum of the copies sold since the launch date of the song.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot time series of total songs sold at the quarterly frequency</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>songs_quarterly_series_df <span class="ot">&lt;-</span>cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_quarter =</span> <span class="fu">paste0</span>(<span class="fu">year</span>(date), <span class="st">"-Q"</span>, <span class="fu">quarter</span>(date))) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_quarter) <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_songs_sold =</span> <span class="fu">sum</span>(copies_sold))</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(songs_quarterly_series_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> year_quarter, <span class="at">y =</span> total_songs_sold)) <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="st">"Quarterly Total Songs Sold Over Time"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Year-Quarter"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_yAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Songs Sold"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_tooltip</span>(<span class="at">valueDecimals =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="highchart html-widget html-fill-item" id="htmlwidget-2eda9b6f4acdb2758f46" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-2eda9b6f4acdb2758f46">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Quarterly Total Songs Sold Over Time"},"yAxis":{"title":{"text":"Total Songs Sold"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":false},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}}},"series":[{"group":"group","data":[{"year_quarter":"2018-Q1","total_songs_sold":385.8967712004243,"y":385.8967712004243,"name":"2018-Q1"},{"year_quarter":"2018-Q2","total_songs_sold":388.3569327459695,"y":388.3569327459695,"name":"2018-Q2"},{"year_quarter":"2018-Q3","total_songs_sold":398.9423015648845,"y":398.9423015648845,"name":"2018-Q3"},{"year_quarter":"2018-Q4","total_songs_sold":319.5259092023476,"y":319.5259092023476,"name":"2018-Q4"},{"year_quarter":"2019-Q1","total_songs_sold":342.2173664848301,"y":342.2173664848301,"name":"2019-Q1"},{"year_quarter":"2019-Q2","total_songs_sold":342.565431722376,"y":342.565431722376,"name":"2019-Q2"},{"year_quarter":"2019-Q3","total_songs_sold":306.2652951100866,"y":306.2652951100866,"name":"2019-Q3"},{"year_quarter":"2019-Q4","total_songs_sold":342.4463149478653,"y":342.4463149478653,"name":"2019-Q4"},{"year_quarter":"2020-Q1","total_songs_sold":300.3294271369826,"y":300.3294271369826,"name":"2020-Q1"},{"year_quarter":"2020-Q2","total_songs_sold":282.0305585210115,"y":282.0305585210115,"name":"2020-Q2"},{"year_quarter":"2020-Q3","total_songs_sold":300.7595109480592,"y":300.7595109480592,"name":"2020-Q3"},{"year_quarter":"2020-Q4","total_songs_sold":293.6986416986746,"y":293.6986416986746,"name":"2020-Q4"},{"year_quarter":"2021-Q1","total_songs_sold":294.4358580490002,"y":294.4358580490002,"name":"2021-Q1"},{"year_quarter":"2021-Q2","total_songs_sold":323.5043871792736,"y":323.5043871792736,"name":"2021-Q2"},{"year_quarter":"2021-Q3","total_songs_sold":304.0006432173126,"y":304.0006432173126,"name":"2021-Q3"},{"year_quarter":"2021-Q4","total_songs_sold":271.8209227059789,"y":271.8209227059789,"name":"2021-Q4"},{"year_quarter":"2022-Q1","total_songs_sold":301.6891531021191,"y":301.6891531021191,"name":"2022-Q1"},{"year_quarter":"2022-Q2","total_songs_sold":256.3726706495272,"y":256.3726706495272,"name":"2022-Q2"},{"year_quarter":"2022-Q3","total_songs_sold":242.3269458432169,"y":242.3269458432169,"name":"2022-Q3"},{"year_quarter":"2022-Q4","total_songs_sold":273.0124402982881,"y":273.0124402982881,"name":"2022-Q4"}],"type":"line"}],"xAxis":{"type":"category","title":{"text":"Year-Quarter"}},"tooltip":{"valueDecimals":0}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot time series of total songs sold at the yearly frequency</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>songs_yearly_series_df <span class="ot">&lt;-</span>cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">format</span>(date, <span class="st">"%Y"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_songs_sold =</span> <span class="fu">sum</span>(copies_sold))</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the highcharter plot object</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(songs_yearly_series_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> year, <span class="at">y =</span> total_songs_sold)) <span class="sc">%&gt;%</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="st">"Yearly Total Songs Sold Over Time"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_yAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Songs Sold"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_tooltip</span>(<span class="at">valueDecimals =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="highchart html-widget html-fill-item" id="htmlwidget-24965230f87751a34b6a" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-24965230f87751a34b6a">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Yearly Total Songs Sold Over Time"},"yAxis":{"title":{"text":"Total Songs Sold"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":false},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}}},"series":[{"group":"group","data":[{"year":"2018","total_songs_sold":1492.721914713626,"y":1492.721914713626,"name":"2018"},{"year":"2019","total_songs_sold":1333.494408265158,"y":1333.494408265158,"name":"2019"},{"year":"2020","total_songs_sold":1176.818138304728,"y":1176.818138304728,"name":"2020"},{"year":"2021","total_songs_sold":1193.761811151565,"y":1193.761811151565,"name":"2021"},{"year":"2022","total_songs_sold":1073.401209893151,"y":1073.401209893151,"name":"2022"}],"type":"line"}],"xAxis":{"type":"category","title":{"text":"Year"}},"tooltip":{"valueDecimals":0}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot time series of total songs sold by genre at the quarterly frequency</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>songs_genre_quarterly_series_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_quarter =</span> <span class="fu">paste0</span>(<span class="fu">year</span>(date), <span class="st">"-Q"</span>, <span class="fu">quarter</span>(date))) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_quarter, genre) <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_songs_sold =</span> <span class="fu">sum</span>(copies_sold))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'year_quarter'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the highcharter plot object</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(songs_genre_quarterly_series_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> year_quarter, <span class="at">y =</span> total_songs_sold, <span class="at">group =</span> genre)) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="st">"Quarterly Total Songs Sold Over Time by Genre"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Year-Quarter"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_yAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Songs Sold"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_tooltip</span>(<span class="at">valueDecimals =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_legend</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Genre"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="highchart html-widget html-fill-item" id="htmlwidget-e07af6eeeec1b2aa70cf" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e07af6eeeec1b2aa70cf">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Quarterly Total Songs Sold Over Time by Genre"},"yAxis":{"title":{"text":"Total Songs Sold"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}}},"series":[{"name":"Chillgaze","data":[{"year_quarter":"2018-Q1","genre":"Chillgaze","total_songs_sold":18.53639562529758,"y":18.53639562529758,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Chillgaze","total_songs_sold":41.44554693966914,"y":41.44554693966914,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Chillgaze","total_songs_sold":44.25307383127618,"y":44.25307383127618,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Chillgaze","total_songs_sold":33.694207406674,"y":33.694207406674,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Chillgaze","total_songs_sold":36.22657103185295,"y":36.22657103185295,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Chillgaze","total_songs_sold":46.05129509839819,"y":46.05129509839819,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Chillgaze","total_songs_sold":29.60464455055944,"y":29.60464455055944,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Chillgaze","total_songs_sold":34.03911425935622,"y":34.03911425935622,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Chillgaze","total_songs_sold":33.78044088678048,"y":33.78044088678048,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Chillgaze","total_songs_sold":36.94600462749514,"y":36.94600462749514,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Chillgaze","total_songs_sold":43.90383111298006,"y":43.90383111298006,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Chillgaze","total_songs_sold":37.91675382772166,"y":37.91675382772166,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Chillgaze","total_songs_sold":38.25856550743823,"y":38.25856550743823,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Chillgaze","total_songs_sold":47.32172701187407,"y":47.32172701187407,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Chillgaze","total_songs_sold":53.08253023974085,"y":53.08253023974085,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Chillgaze","total_songs_sold":49.85344120202802,"y":49.85344120202802,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Chillgaze","total_songs_sold":71.61060489414896,"y":71.61060489414896,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Chillgaze","total_songs_sold":52.61508272322124,"y":52.61508272322124,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Chillgaze","total_songs_sold":43.44002269685871,"y":43.44002269685871,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Chillgaze","total_songs_sold":35.90719523176372,"y":35.90719523176372,"name":"2022-Q4"}],"type":"line"},{"name":"Electroswing","data":[{"year_quarter":"2018-Q1","genre":"Electroswing","total_songs_sold":20.61630216087374,"y":20.61630216087374,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Electroswing","total_songs_sold":15.4443300225445,"y":15.4443300225445,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Electroswing","total_songs_sold":18.3045781087612,"y":18.3045781087612,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Electroswing","total_songs_sold":17.849113998847,"y":17.849113998847,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Electroswing","total_songs_sold":18.37314408437877,"y":18.37314408437877,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Electroswing","total_songs_sold":19.44311656653863,"y":19.44311656653863,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Electroswing","total_songs_sold":23.71277651144903,"y":23.71277651144903,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Electroswing","total_songs_sold":26.01909915801451,"y":26.01909915801451,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Electroswing","total_songs_sold":20.38415166646763,"y":20.38415166646763,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Electroswing","total_songs_sold":20.85547417699879,"y":20.85547417699879,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Electroswing","total_songs_sold":19.41774929814598,"y":19.41774929814598,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Electroswing","total_songs_sold":14.4126458452222,"y":14.4126458452222,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Electroswing","total_songs_sold":20.17939064092217,"y":20.17939064092217,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Electroswing","total_songs_sold":22.62059859319105,"y":22.62059859319105,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Electroswing","total_songs_sold":18.69083109999669,"y":18.69083109999669,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Electroswing","total_songs_sold":22.48634899981576,"y":22.48634899981576,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Electroswing","total_songs_sold":23.49282185102416,"y":23.49282185102416,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Electroswing","total_songs_sold":13.32174822341225,"y":13.32174822341225,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Electroswing","total_songs_sold":21.70896828866259,"y":21.70896828866259,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Electroswing","total_songs_sold":23.85181170695938,"y":23.85181170695938,"name":"2022-Q4"}],"type":"line"},{"name":"Folktronica","data":[{"year_quarter":"2018-Q1","genre":"Folktronica","total_songs_sold":272.2436241673242,"y":272.2436241673242,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Folktronica","total_songs_sold":244.0771000388141,"y":244.0771000388141,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Folktronica","total_songs_sold":223.6130411675624,"y":223.6130411675624,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Folktronica","total_songs_sold":178.2938823132933,"y":178.2938823132933,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Folktronica","total_songs_sold":191.0054067253595,"y":191.0054067253595,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Folktronica","total_songs_sold":169.686380812602,"y":169.686380812602,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Folktronica","total_songs_sold":167.4398567019117,"y":167.4398567019117,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Folktronica","total_songs_sold":187.7555696806805,"y":187.7555696806805,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Folktronica","total_songs_sold":165.5104389758711,"y":165.5104389758711,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Folktronica","total_songs_sold":156.8517664109357,"y":156.8517664109357,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Folktronica","total_songs_sold":141.9483218867221,"y":141.9483218867221,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Folktronica","total_songs_sold":153.196973675087,"y":153.196973675087,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Folktronica","total_songs_sold":158.5412194777561,"y":158.5412194777561,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Folktronica","total_songs_sold":166.4240816972709,"y":166.4240816972709,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Folktronica","total_songs_sold":152.3198438251361,"y":152.3198438251361,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Folktronica","total_songs_sold":120.5388900699965,"y":120.5388900699965,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Folktronica","total_songs_sold":129.0270899369843,"y":129.0270899369843,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Folktronica","total_songs_sold":113.0266151969009,"y":113.0266151969009,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Folktronica","total_songs_sold":101.887197163534,"y":101.887197163534,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Folktronica","total_songs_sold":126.1411715354683,"y":126.1411715354683,"name":"2022-Q4"}],"type":"line"},{"name":"Futuristicountry","data":[{"year_quarter":"2018-Q1","genre":"Futuristicountry","total_songs_sold":9.914097057628075,"y":9.914097057628075,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Futuristicountry","total_songs_sold":10.70115453749304,"y":10.70115453749304,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Futuristicountry","total_songs_sold":7.077159027908134,"y":7.077159027908134,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Futuristicountry","total_songs_sold":4.848671971015984,"y":4.848671971015984,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Futuristicountry","total_songs_sold":12.05976527460708,"y":12.05976527460708,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Futuristicountry","total_songs_sold":7.131435988210459,"y":7.131435988210459,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Futuristicountry","total_songs_sold":4.851694660071626,"y":4.851694660071626,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Futuristicountry","total_songs_sold":2.721150289879491,"y":2.721150289879491,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Futuristicountry","total_songs_sold":5.817367709335358,"y":5.817367709335358,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Futuristicountry","total_songs_sold":5.770217396342354,"y":5.770217396342354,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Futuristicountry","total_songs_sold":5.258567259313295,"y":5.258567259313295,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Futuristicountry","total_songs_sold":7.145387298093789,"y":7.145387298093789,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Futuristicountry","total_songs_sold":9.214314636476383,"y":9.214314636476383,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Futuristicountry","total_songs_sold":3.72096304155842,"y":3.72096304155842,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Futuristicountry","total_songs_sold":6.849555845108283,"y":6.849555845108283,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Futuristicountry","total_songs_sold":5.716357820753859,"y":5.716357820753859,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Futuristicountry","total_songs_sold":5.812488341585897,"y":5.812488341585897,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Futuristicountry","total_songs_sold":9.480226136441004,"y":9.480226136441004,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Futuristicountry","total_songs_sold":6.290165010831732,"y":6.290165010831732,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Futuristicountry","total_songs_sold":13.86922922078547,"y":13.86922922078547,"name":"2022-Q4"}],"type":"line"},{"name":"Gothicsynth","data":[{"year_quarter":"2018-Q1","genre":"Gothicsynth","total_songs_sold":13.67984412086226,"y":13.67984412086226,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Gothicsynth","total_songs_sold":24.89494298699781,"y":24.89494298699781,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Gothicsynth","total_songs_sold":21.13349896386447,"y":21.13349896386447,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Gothicsynth","total_songs_sold":18.35721120268497,"y":18.35721120268497,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Gothicsynth","total_songs_sold":22.71882566216588,"y":22.71882566216588,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Gothicsynth","total_songs_sold":20.27066607720457,"y":20.27066607720457,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Gothicsynth","total_songs_sold":20.62223129218226,"y":20.62223129218226,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Gothicsynth","total_songs_sold":19.34948073423456,"y":19.34948073423456,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Gothicsynth","total_songs_sold":16.43300906467761,"y":16.43300906467761,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Gothicsynth","total_songs_sold":16.03483011098582,"y":16.03483011098582,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Gothicsynth","total_songs_sold":16.63252458413055,"y":16.63252458413055,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Gothicsynth","total_songs_sold":14.10531904078758,"y":14.10531904078758,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Gothicsynth","total_songs_sold":21.42216289129765,"y":21.42216289129765,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Gothicsynth","total_songs_sold":17.33070631666526,"y":17.33070631666526,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Gothicsynth","total_songs_sold":23.22409042182535,"y":23.22409042182535,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Gothicsynth","total_songs_sold":19.87185015230604,"y":19.87185015230604,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Gothicsynth","total_songs_sold":20.62365915890216,"y":20.62365915890216,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Gothicsynth","total_songs_sold":16.66847215887846,"y":16.66847215887846,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Gothicsynth","total_songs_sold":19.51668903817951,"y":19.51668903817951,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Gothicsynth","total_songs_sold":17.10638401838422,"y":17.10638401838422,"name":"2022-Q4"}],"type":"line"},{"name":"Indiedisco","data":[{"year_quarter":"2018-Q1","genre":"Indiedisco","total_songs_sold":4.654314716968609,"y":4.654314716968609,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Indiedisco","total_songs_sold":3.87041081832965,"y":3.87041081832965,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Indiedisco","total_songs_sold":7.778064526270513,"y":7.778064526270513,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Indiedisco","total_songs_sold":5.570667944199434,"y":5.570667944199434,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Indiedisco","total_songs_sold":3.387365367624075,"y":3.387365367624075,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Indiedisco","total_songs_sold":11.23087671276658,"y":11.23087671276658,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Indiedisco","total_songs_sold":3.278867835795826,"y":3.278867835795826,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Indiedisco","total_songs_sold":1.718023329549792,"y":1.718023329549792,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Indiedisco","total_songs_sold":1.598472830892623,"y":1.598472830892623,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Indiedisco","total_songs_sold":4.265509384555428,"y":4.265509384555428,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Indiedisco","total_songs_sold":2.497504147993682,"y":2.497504147993682,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Indiedisco","total_songs_sold":5.499154784331847,"y":5.499154784331847,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Indiedisco","total_songs_sold":6.171648207121193,"y":6.171648207121193,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Indiedisco","total_songs_sold":5.871662371740665,"y":5.871662371740665,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Indiedisco","total_songs_sold":0.2433040121108494,"y":0.2433040121108494,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Indiedisco","total_songs_sold":1.490349636421329,"y":1.490349636421329,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Indiedisco","total_songs_sold":1.656836316675958,"y":1.656836316675958,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Indiedisco","total_songs_sold":3.857263907499287,"y":3.857263907499287,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Indiedisco","total_songs_sold":3.644529875253104,"y":3.644529875253104,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Indiedisco","total_songs_sold":1.03015382223363,"y":1.03015382223363,"name":"2022-Q4"}],"type":"line"},{"name":"Junglejazz","data":[{"year_quarter":"2018-Q1","genre":"Junglejazz","total_songs_sold":0.7999924127387756,"y":0.7999924127387756,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Junglejazz","total_songs_sold":0.5625700062371333,"y":0.5625700062371333,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Junglejazz","total_songs_sold":1.699431356623008,"y":1.699431356623008,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Junglejazz","total_songs_sold":4.110451873139476,"y":4.110451873139476,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Junglejazz","total_songs_sold":0.9941101501357164,"y":0.9941101501357164,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Junglejazz","total_songs_sold":4.781639158550014,"y":4.781639158550014,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Junglejazz","total_songs_sold":1.250739832760257,"y":1.250739832760257,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Junglejazz","total_songs_sold":3.744796554922253,"y":3.744796554922253,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Junglejazz","total_songs_sold":1.961465451259559,"y":1.961465451259559,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Junglejazz","total_songs_sold":1.619497842210458,"y":1.619497842210458,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Junglejazz","total_songs_sold":3.203967646096349,"y":3.203967646096349,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Junglejazz","total_songs_sold":2.012830845086325,"y":2.012830845086325,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Junglejazz","total_songs_sold":1.692302852035999,"y":1.692302852035999,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Junglejazz","total_songs_sold":2.408696400132773,"y":2.408696400132773,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Junglejazz","total_songs_sold":7.540882041098741,"y":7.540882041098741,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Junglejazz","total_songs_sold":3.834583048824259,"y":3.834583048824259,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Junglejazz","total_songs_sold":4.063435470652967,"y":4.063435470652967,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Junglejazz","total_songs_sold":2.713439816786154,"y":2.713439816786154,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Junglejazz","total_songs_sold":1.596060651285373,"y":1.596060651285373,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Junglejazz","total_songs_sold":3.063068038760226,"y":3.063068038760226,"name":"2022-Q4"}],"type":"line"},{"name":"Neoclassicalwave","data":[{"year_quarter":"2018-Q1","genre":"Neoclassicalwave","total_songs_sold":3.358428771068673,"y":3.358428771068673,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Neoclassicalwave","total_songs_sold":2.923507268992996,"y":2.923507268992996,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Neoclassicalwave","total_songs_sold":3.371061689568944,"y":3.371061689568944,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Neoclassicalwave","total_songs_sold":5.888481130897749,"y":5.888481130897749,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Neoclassicalwave","total_songs_sold":1.8079288323654,"y":1.8079288323654,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Neoclassicalwave","total_songs_sold":10.2625842363158,"y":10.2625842363158,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Neoclassicalwave","total_songs_sold":1.909520518724008,"y":1.909520518724008,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Neoclassicalwave","total_songs_sold":6.999293508011637,"y":6.999293508011637,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Neoclassicalwave","total_songs_sold":5.463979938268894,"y":5.463979938268894,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Neoclassicalwave","total_songs_sold":3.286902385736073,"y":3.286902385736073,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Neoclassicalwave","total_songs_sold":6.463283271125204,"y":6.463283271125204,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Neoclassicalwave","total_songs_sold":4.178900394536971,"y":4.178900394536971,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Neoclassicalwave","total_songs_sold":5.549360947253228,"y":5.549360947253228,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Neoclassicalwave","total_songs_sold":3.112378727240074,"y":3.112378727240074,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Neoclassicalwave","total_songs_sold":2.634112672338431,"y":2.634112672338431,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Neoclassicalwave","total_songs_sold":3.148001965927672,"y":3.148001965927672,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Neoclassicalwave","total_songs_sold":3.609236368422093,"y":3.609236368422093,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Neoclassicalwave","total_songs_sold":1.22584960933714,"y":1.22584960933714,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Neoclassicalwave","total_songs_sold":0.9189574474603907,"y":0.9189574474603907,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Neoclassicalwave","total_songs_sold":6.213618945238559,"y":6.213618945238559,"name":"2022-Q4"}],"type":"line"},{"name":"Psychedelictrance","data":[{"year_quarter":"2018-Q1","genre":"Psychedelictrance","total_songs_sold":35.46981413333408,"y":35.46981413333408,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Psychedelictrance","total_songs_sold":38.90544991994351,"y":38.90544991994351,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Psychedelictrance","total_songs_sold":68.71733561638,"y":68.71733561638,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Psychedelictrance","total_songs_sold":50.83169180636264,"y":50.83169180636264,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Psychedelictrance","total_songs_sold":47.81825142572622,"y":47.81825142572622,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Psychedelictrance","total_songs_sold":46.21578626247187,"y":46.21578626247187,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Psychedelictrance","total_songs_sold":44.83634919102274,"y":44.83634919102274,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Psychedelictrance","total_songs_sold":46.18367514310653,"y":46.18367514310653,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Psychedelictrance","total_songs_sold":43.2316644546832,"y":43.2316644546832,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Psychedelictrance","total_songs_sold":31.24186759335063,"y":31.24186759335063,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Psychedelictrance","total_songs_sold":55.78438514437139,"y":55.78438514437139,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Psychedelictrance","total_songs_sold":49.20366438259763,"y":49.20366438259763,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Psychedelictrance","total_songs_sold":30.93980589340795,"y":30.93980589340795,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Psychedelictrance","total_songs_sold":47.06700172095476,"y":47.06700172095476,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Psychedelictrance","total_songs_sold":36.31792009485025,"y":36.31792009485025,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Psychedelictrance","total_songs_sold":38.27352688906448,"y":38.27352688906448,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Psychedelictrance","total_songs_sold":33.18265596353157,"y":33.18265596353157,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Psychedelictrance","total_songs_sold":41.2501667900364,"y":41.2501667900364,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Psychedelictrance","total_songs_sold":38.71662426718298,"y":38.71662426718298,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Psychedelictrance","total_songs_sold":37.48126051764034,"y":37.48126051764034,"name":"2022-Q4"}],"type":"line"},{"name":"Trip-pop","data":[{"year_quarter":"2018-Q1","genre":"Trip-pop","total_songs_sold":6.623958034328247,"y":6.623958034328247,"name":"2018-Q1"},{"year_quarter":"2018-Q2","genre":"Trip-pop","total_songs_sold":5.531920206947646,"y":5.531920206947646,"name":"2018-Q2"},{"year_quarter":"2018-Q3","genre":"Trip-pop","total_songs_sold":2.995057276669594,"y":2.995057276669594,"name":"2018-Q3"},{"year_quarter":"2018-Q4","genre":"Trip-pop","total_songs_sold":0.08152955523307727,"y":0.08152955523307727,"name":"2018-Q4"},{"year_quarter":"2019-Q1","genre":"Trip-pop","total_songs_sold":7.825997930614486,"y":7.825997930614486,"name":"2019-Q1"},{"year_quarter":"2019-Q2","genre":"Trip-pop","total_songs_sold":7.491650809317854,"y":7.491650809317854,"name":"2019-Q2"},{"year_quarter":"2019-Q3","genre":"Trip-pop","total_songs_sold":8.758614015609721,"y":8.758614015609721,"name":"2019-Q3"},{"year_quarter":"2019-Q4","genre":"Trip-pop","total_songs_sold":13.91611229010986,"y":13.91611229010986,"name":"2019-Q4"},{"year_quarter":"2020-Q1","genre":"Trip-pop","total_songs_sold":6.148436158746194,"y":6.148436158746194,"name":"2020-Q1"},{"year_quarter":"2020-Q2","genre":"Trip-pop","total_songs_sold":5.158488592401095,"y":5.158488592401095,"name":"2020-Q2"},{"year_quarter":"2020-Q3","genre":"Trip-pop","total_songs_sold":5.649376597180646,"y":5.649376597180646,"name":"2020-Q3"},{"year_quarter":"2020-Q4","genre":"Trip-pop","total_songs_sold":6.027011605209685,"y":6.027011605209685,"name":"2020-Q4"},{"year_quarter":"2021-Q1","genre":"Trip-pop","total_songs_sold":2.467086995291246,"y":2.467086995291246,"name":"2021-Q1"},{"year_quarter":"2021-Q2","genre":"Trip-pop","total_songs_sold":7.626571298645546,"y":7.626571298645546,"name":"2021-Q2"},{"year_quarter":"2021-Q3","genre":"Trip-pop","total_songs_sold":3.097572965107124,"y":3.097572965107124,"name":"2021-Q3"},{"year_quarter":"2021-Q4","genre":"Trip-pop","total_songs_sold":6.607572920840951,"y":6.607572920840951,"name":"2021-Q4"},{"year_quarter":"2022-Q1","genre":"Trip-pop","total_songs_sold":8.610324800190934,"y":8.610324800190934,"name":"2022-Q1"},{"year_quarter":"2022-Q2","genre":"Trip-pop","total_songs_sold":2.213806087014367,"y":2.213806087014367,"name":"2022-Q2"},{"year_quarter":"2022-Q3","genre":"Trip-pop","total_songs_sold":4.607731403968461,"y":4.607731403968461,"name":"2022-Q3"},{"year_quarter":"2022-Q4","genre":"Trip-pop","total_songs_sold":8.348547261054371,"y":8.348547261054371,"name":"2022-Q4"}],"type":"line"}],"xAxis":{"type":"category","title":{"text":"Year-Quarter"}},"tooltip":{"valueDecimals":0},"legend":{"title":{"text":"Genre"}}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="investigate-temporal-patterns---observe-if-there-is-seasonality-present-at-weekly-monthly-and-quarterly-frequency" class="level4">
<h4 class="anchored" data-anchor-id="investigate-temporal-patterns---observe-if-there-is-seasonality-present-at-weekly-monthly-and-quarterly-frequency">2.2 Investigate temporal patterns - Observe if there is seasonality present at weekly, monthly and quarterly frequency</h4>
<p><strong>Objective:</strong> To see whether it is important include seasonal dummies for the models, we plot the seasonal plots of copies_sold at each frequency.</p>
<p><strong>Findings:</strong> There appears to no strong visual evidence of seasonality, note that there is a dip in week <em>53</em> because there are relatively less rows in week 53.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the seasonal plots at the weekly, monthly and quarterly level for all the years </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Add columns for week, quarter, month and year </span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>songs_time_index_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span>  </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date), </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">quarter =</span> <span class="fu">quarter</span>(date),</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">month =</span> <span class="fu">month</span>(date),</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">week =</span> <span class="fu">week</span>(date))</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the frequencies and their corresponding columns</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>frequencies <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"week"</span>, <span class="st">"month"</span>, <span class="st">"quarter"</span>)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>frequency_cols <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">week =</span> <span class="st">"week"</span>, <span class="at">month =</span> <span class="st">"month"</span>, <span class="at">quarter =</span> <span class="st">"quarter"</span>)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each frequency and generate plots</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (freq <span class="cf">in</span> frequencies) {</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  col_name <span class="ot">&lt;-</span> frequency_cols[[freq]]</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Aggregate data at the current frequency</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  aggregated_data <span class="ot">&lt;-</span> songs_time_index_df <span class="sc">%&gt;%</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, <span class="sc">!!</span><span class="fu">sym</span>(col_name)) <span class="sc">%&gt;%</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">total_copies_sold =</span> <span class="fu">round</span>(<span class="fu">sum</span>(copies_sold)))</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generate plot for the current frequency</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">hchart</span>(aggregated_data, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> <span class="sc">!!</span><span class="fu">sym</span>(col_name), <span class="at">y =</span>  total_copies_sold, <span class="at">group =</span> year)) <span class="sc">%&gt;%</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_colors</span>(<span class="at">colors =</span> <span class="fu">viridis</span>(<span class="fu">length</span>(<span class="fu">unique</span>(aggregated_data<span class="sc">$</span>year)))) <span class="sc">%&gt;%</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="fu">paste</span>(<span class="fu">toupper</span>(freq), <span class="st">"Copies Sold by Year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="fu">toupper</span>(freq)),</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>             <span class="at">labels =</span> <span class="fu">list</span>(<span class="at">step =</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_yAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Copies Sold"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_legend</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_tooltip</span>(<span class="at">crosshairs =</span> <span class="cn">TRUE</span>, <span class="at">shared =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_exporting</span>(<span class="at">enabled =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print the plot</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'year'. You can override using the
`.groups` argument.
`summarise()` has grouped output by 'year'. You can override using the
`.groups` argument.
`summarise()` has grouped output by 'year'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
</section>
<section id="investigate-temporal-patterns---plot-the-total-loudness-energy-and-length-at-the-quarterly-level" class="level4">
<h4 class="anchored" data-anchor-id="investigate-temporal-patterns---plot-the-total-loudness-energy-and-length-at-the-quarterly-level">2.2 Investigate temporal patterns - Plot the total loudness, energy and length at the quarterly level</h4>
<p>Findings:</p>
<ul>
<li><p>All series appears to be quite stable across time where <code>total_energy</code>, <code>total_loudness</code> exhibit a slight downward trend.</p></li>
<li><p>All series exhibit a uptick at towards the end of the time series</p></li>
<li><p>There is high correlation amongst the features</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggreate target and features at each frequency and plot </span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Create time series df at the monthly frequency</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>features_weekly_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">format</span>(date, <span class="st">"%Y-%W"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_copies_sold =</span> <span class="fu">sum</span>(copies_sold),</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_loudness =</span> <span class="fu">sum</span>(loudness),</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_energy =</span> <span class="fu">sum</span>(energy),</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_length =</span> <span class="fu">sum</span>(length)) <span class="sc">%&gt;%</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date) </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create time series df at the monthly frequency</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>features_monthly_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">format</span>(date, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_copies_sold =</span> <span class="fu">sum</span>(copies_sold),</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_loudness =</span> <span class="fu">sum</span>(loudness),</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_energy =</span> <span class="fu">sum</span>(energy),</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_length =</span> <span class="fu">sum</span>(length)) <span class="sc">%&gt;%</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date) </span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Create time series df at the quarterly frequency</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>features_quarterly_df <span class="ot">&lt;-</span>cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">paste0</span>(<span class="fu">year</span>(date), <span class="st">"-Q"</span>, <span class="fu">quarter</span>(date))) <span class="sc">%&gt;%</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">total_copies_sold =</span> <span class="fu">sum</span>(copies_sold),</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_loudness =</span> <span class="fu">sum</span>(loudness),</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_energy =</span> <span class="fu">sum</span>(energy),</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>            <span class="at">total_length =</span> <span class="fu">sum</span>(length)) <span class="sc">%&gt;%</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date)</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list to store the dataframes</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>features_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">weekly =</span> features_weekly_df,</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">monthly =</span> features_monthly_df,</span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">quarterly =</span> features_quarterly_df</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through the frequencies and create the plots</span></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (freq <span class="cf">in</span> <span class="fu">names</span>(features_list)) {</span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>  features_df <span class="ot">&lt;-</span> features_list[[freq]]  <span class="co"># Corrected variable name</span></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">hchart</span>(features_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> date, <span class="at">y =</span> total_loudness), <span class="at">name =</span> <span class="st">"Total Loudness"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_add_series</span>(features_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> date, <span class="at">y =</span> total_energy), <span class="at">name =</span> <span class="st">"Total Energy"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_add_series</span>(features_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> date, <span class="at">y =</span> total_length), <span class="at">yAxis =</span> <span class="dv">1</span>, <span class="at">name =</span> <span class="st">"Total Length"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_add_series</span>(features_df, <span class="st">"line"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> date, <span class="at">y =</span> <span class="dv">10</span><span class="sc">*</span>total_copies_sold), <span class="at">yAxis =</span> <span class="dv">1</span>, <span class="at">name =</span> <span class="st">"Total Copies Sold"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="fu">paste</span>(<span class="st">"Features and target"</span>, freq)) <span class="sc">%&gt;%</span></span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Date"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_yAxis_multiples</span>(<span class="fu">list</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Loudness/Energy"</span>),</span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>                            <span class="at">opposite =</span> <span class="cn">FALSE</span>),</span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">list</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Length/Copies Sold"</span>),</span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>                            <span class="at">opposite =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_tooltip</span>(<span class="at">valueDecimals =</span> <span class="dv">0</span>)</span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="eda-perform-different-counts-on-the-data-relating-to-target" class="level4">
<h4 class="anchored" data-anchor-id="eda-perform-different-counts-on-the-data-relating-to-target">2.3 EDA: Perform different counts on the data relating to target</h4>
<p>We perform the following counts:</p>
<ul>
<li><strong>Check</strong>: Number of songs that sold above 2 million and the count to see if there is class imbalance.
<ul>
<li><strong>Findings:</strong> As the proportion of songs sold above 2 million only covers ~6% of the data, recommend using regression approach.</li>
</ul></li>
<li><strong>Check</strong>: Total count of songs released in each year in aggregate and by genre.
<ul>
<li><strong>Findings:</strong>
<ul>
<li>Aggregate songs released in year is overall decreasing</li>
<li>Folktronica features releases the most songs by year consistent with the amount of copies sold</li>
</ul></li>
</ul></li>
<li><strong>Check</strong>: Total count of songs released by band in across all time to see if there are any data anomalies and whether it’s feasible to train a model at the band level
<ul>
<li><strong>Findings:</strong> There are 1390 unique bands and 7970 observations, where most bands have released less than 5 songs. Insufficient degrees of freedom to estimate a statistical model, pivot to <em>genre</em> level.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the proportion of song that  sold above 2 million </span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>proportion_songs_above_2m <span class="ot">&lt;-</span>cleaned_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">proportion_songs_above_2m =</span> <span class="fu">sum</span>(copies_sold <span class="sc">&gt;=</span> <span class="dv">2</span>) <span class="sc">/</span> <span class="fu">nrow</span>(.))</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate total count of songs released in each year in aggregate by genre </span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>songs_yearly_count_df <span class="ot">&lt;-</span>cleaned_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date)) <span class="sc">%&gt;%</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, genre) <span class="sc">%&gt;%</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_songs_released =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'year'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a stacked bar chart across time of the count songs for each genre </span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(songs_yearly_count_df, <span class="st">"column"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> year, <span class="at">y =</span> total_songs_released, <span class="at">group =</span> genre)) <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="st">"Yearly Total Songs Released by Genre"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_yAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Songs Released"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_tooltip</span>(<span class="at">valueDecimals =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="highchart html-widget html-fill-item" id="htmlwidget-4b3e244a70c7f10e87b8" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-4b3e244a70c7f10e87b8">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Yearly Total Songs Released by Genre"},"yAxis":{"title":{"text":"Total Songs Released"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}}},"series":[{"name":"Chillgaze","data":[{"year":2018,"genre":"Chillgaze","total_songs_released":211,"x":2018,"y":211},{"year":2019,"genre":"Chillgaze","total_songs_released":200,"x":2019,"y":200},{"year":2020,"genre":"Chillgaze","total_songs_released":199,"x":2020,"y":199},{"year":2021,"genre":"Chillgaze","total_songs_released":222,"x":2021,"y":222},{"year":2022,"genre":"Chillgaze","total_songs_released":207,"x":2022,"y":207}],"type":"column"},{"name":"Electroswing","data":[{"year":2018,"genre":"Electroswing","total_songs_released":159,"x":2018,"y":159},{"year":2019,"genre":"Electroswing","total_songs_released":157,"x":2019,"y":157},{"year":2020,"genre":"Electroswing","total_songs_released":143,"x":2020,"y":143},{"year":2021,"genre":"Electroswing","total_songs_released":147,"x":2021,"y":147},{"year":2022,"genre":"Electroswing","total_songs_released":155,"x":2022,"y":155}],"type":"column"},{"name":"Folktronica","data":[{"year":2018,"genre":"Folktronica","total_songs_released":817,"x":2018,"y":817},{"year":2019,"genre":"Folktronica","total_songs_released":707,"x":2019,"y":707},{"year":2020,"genre":"Folktronica","total_songs_released":661,"x":2020,"y":661},{"year":2021,"genre":"Folktronica","total_songs_released":653,"x":2021,"y":653},{"year":2022,"genre":"Folktronica","total_songs_released":582,"x":2022,"y":582}],"type":"column"},{"name":"Futuristicountry","data":[{"year":2018,"genre":"Futuristicountry","total_songs_released":59,"x":2018,"y":59},{"year":2019,"genre":"Futuristicountry","total_songs_released":50,"x":2019,"y":50},{"year":2020,"genre":"Futuristicountry","total_songs_released":41,"x":2020,"y":41},{"year":2021,"genre":"Futuristicountry","total_songs_released":49,"x":2021,"y":49},{"year":2022,"genre":"Futuristicountry","total_songs_released":49,"x":2022,"y":49}],"type":"column"},{"name":"Gothicsynth","data":[{"year":2018,"genre":"Gothicsynth","total_songs_released":167,"x":2018,"y":167},{"year":2019,"genre":"Gothicsynth","total_songs_released":163,"x":2019,"y":163},{"year":2020,"genre":"Gothicsynth","total_songs_released":130,"x":2020,"y":130},{"year":2021,"genre":"Gothicsynth","total_songs_released":159,"x":2021,"y":159},{"year":2022,"genre":"Gothicsynth","total_songs_released":151,"x":2022,"y":151}],"type":"column"},{"name":"Indiedisco","data":[{"year":2018,"genre":"Indiedisco","total_songs_released":34,"x":2018,"y":34},{"year":2019,"genre":"Indiedisco","total_songs_released":25,"x":2019,"y":25},{"year":2020,"genre":"Indiedisco","total_songs_released":23,"x":2020,"y":23},{"year":2021,"genre":"Indiedisco","total_songs_released":22,"x":2021,"y":22},{"year":2022,"genre":"Indiedisco","total_songs_released":20,"x":2022,"y":20}],"type":"column"},{"name":"Junglejazz","data":[{"year":2018,"genre":"Junglejazz","total_songs_released":13,"x":2018,"y":13},{"year":2019,"genre":"Junglejazz","total_songs_released":13,"x":2019,"y":13},{"year":2020,"genre":"Junglejazz","total_songs_released":11,"x":2020,"y":11},{"year":2021,"genre":"Junglejazz","total_songs_released":16,"x":2021,"y":16},{"year":2022,"genre":"Junglejazz","total_songs_released":19,"x":2022,"y":19}],"type":"column"},{"name":"Neoclassicalwave","data":[{"year":2018,"genre":"Neoclassicalwave","total_songs_released":28,"x":2018,"y":28},{"year":2019,"genre":"Neoclassicalwave","total_songs_released":33,"x":2019,"y":33},{"year":2020,"genre":"Neoclassicalwave","total_songs_released":33,"x":2020,"y":33},{"year":2021,"genre":"Neoclassicalwave","total_songs_released":30,"x":2021,"y":30},{"year":2022,"genre":"Neoclassicalwave","total_songs_released":29,"x":2022,"y":29}],"type":"column"},{"name":"Psychedelictrance","data":[{"year":2018,"genre":"Psychedelictrance","total_songs_released":243,"x":2018,"y":243},{"year":2019,"genre":"Psychedelictrance","total_songs_released":236,"x":2019,"y":236},{"year":2020,"genre":"Psychedelictrance","total_songs_released":225,"x":2020,"y":225},{"year":2021,"genre":"Psychedelictrance","total_songs_released":201,"x":2021,"y":201},{"year":2022,"genre":"Psychedelictrance","total_songs_released":191,"x":2022,"y":191}],"type":"column"},{"name":"Trip-pop","data":[{"year":2018,"genre":"Trip-pop","total_songs_released":24,"x":2018,"y":24},{"year":2019,"genre":"Trip-pop","total_songs_released":38,"x":2019,"y":38},{"year":2020,"genre":"Trip-pop","total_songs_released":31,"x":2020,"y":31},{"year":2021,"genre":"Trip-pop","total_songs_released":21,"x":2021,"y":21},{"year":2022,"genre":"Trip-pop","total_songs_released":26,"x":2022,"y":26}],"type":"column"}],"xAxis":{"type":"linear","title":{"text":"Year"}},"tooltip":{"valueDecimals":0}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a stacked bar chart across time of the count songs for each genre</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(songs_yearly_count_df, <span class="st">"column"</span>, <span class="fu">hcaes</span>(<span class="at">x =</span> year, <span class="at">y =</span> total_songs_released, <span class="at">group =</span> genre), <span class="at">stacking =</span> <span class="st">"normal"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="st">"Yearly Total Songs Released by Genre"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_yAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Total Songs Released"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_tooltip</span>(<span class="at">valueDecimals =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="highchart html-widget html-fill-item" id="htmlwidget-087717449490de5dee1d" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-087717449490de5dee1d">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Yearly Total Songs Released by Genre"},"yAxis":{"title":{"text":"Total Songs Released"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}}},"series":[{"name":"Chillgaze","data":[{"year":2018,"genre":"Chillgaze","total_songs_released":211,"x":2018,"y":211},{"year":2019,"genre":"Chillgaze","total_songs_released":200,"x":2019,"y":200},{"year":2020,"genre":"Chillgaze","total_songs_released":199,"x":2020,"y":199},{"year":2021,"genre":"Chillgaze","total_songs_released":222,"x":2021,"y":222},{"year":2022,"genre":"Chillgaze","total_songs_released":207,"x":2022,"y":207}],"type":"column","stacking":"normal"},{"name":"Electroswing","data":[{"year":2018,"genre":"Electroswing","total_songs_released":159,"x":2018,"y":159},{"year":2019,"genre":"Electroswing","total_songs_released":157,"x":2019,"y":157},{"year":2020,"genre":"Electroswing","total_songs_released":143,"x":2020,"y":143},{"year":2021,"genre":"Electroswing","total_songs_released":147,"x":2021,"y":147},{"year":2022,"genre":"Electroswing","total_songs_released":155,"x":2022,"y":155}],"type":"column","stacking":"normal"},{"name":"Folktronica","data":[{"year":2018,"genre":"Folktronica","total_songs_released":817,"x":2018,"y":817},{"year":2019,"genre":"Folktronica","total_songs_released":707,"x":2019,"y":707},{"year":2020,"genre":"Folktronica","total_songs_released":661,"x":2020,"y":661},{"year":2021,"genre":"Folktronica","total_songs_released":653,"x":2021,"y":653},{"year":2022,"genre":"Folktronica","total_songs_released":582,"x":2022,"y":582}],"type":"column","stacking":"normal"},{"name":"Futuristicountry","data":[{"year":2018,"genre":"Futuristicountry","total_songs_released":59,"x":2018,"y":59},{"year":2019,"genre":"Futuristicountry","total_songs_released":50,"x":2019,"y":50},{"year":2020,"genre":"Futuristicountry","total_songs_released":41,"x":2020,"y":41},{"year":2021,"genre":"Futuristicountry","total_songs_released":49,"x":2021,"y":49},{"year":2022,"genre":"Futuristicountry","total_songs_released":49,"x":2022,"y":49}],"type":"column","stacking":"normal"},{"name":"Gothicsynth","data":[{"year":2018,"genre":"Gothicsynth","total_songs_released":167,"x":2018,"y":167},{"year":2019,"genre":"Gothicsynth","total_songs_released":163,"x":2019,"y":163},{"year":2020,"genre":"Gothicsynth","total_songs_released":130,"x":2020,"y":130},{"year":2021,"genre":"Gothicsynth","total_songs_released":159,"x":2021,"y":159},{"year":2022,"genre":"Gothicsynth","total_songs_released":151,"x":2022,"y":151}],"type":"column","stacking":"normal"},{"name":"Indiedisco","data":[{"year":2018,"genre":"Indiedisco","total_songs_released":34,"x":2018,"y":34},{"year":2019,"genre":"Indiedisco","total_songs_released":25,"x":2019,"y":25},{"year":2020,"genre":"Indiedisco","total_songs_released":23,"x":2020,"y":23},{"year":2021,"genre":"Indiedisco","total_songs_released":22,"x":2021,"y":22},{"year":2022,"genre":"Indiedisco","total_songs_released":20,"x":2022,"y":20}],"type":"column","stacking":"normal"},{"name":"Junglejazz","data":[{"year":2018,"genre":"Junglejazz","total_songs_released":13,"x":2018,"y":13},{"year":2019,"genre":"Junglejazz","total_songs_released":13,"x":2019,"y":13},{"year":2020,"genre":"Junglejazz","total_songs_released":11,"x":2020,"y":11},{"year":2021,"genre":"Junglejazz","total_songs_released":16,"x":2021,"y":16},{"year":2022,"genre":"Junglejazz","total_songs_released":19,"x":2022,"y":19}],"type":"column","stacking":"normal"},{"name":"Neoclassicalwave","data":[{"year":2018,"genre":"Neoclassicalwave","total_songs_released":28,"x":2018,"y":28},{"year":2019,"genre":"Neoclassicalwave","total_songs_released":33,"x":2019,"y":33},{"year":2020,"genre":"Neoclassicalwave","total_songs_released":33,"x":2020,"y":33},{"year":2021,"genre":"Neoclassicalwave","total_songs_released":30,"x":2021,"y":30},{"year":2022,"genre":"Neoclassicalwave","total_songs_released":29,"x":2022,"y":29}],"type":"column","stacking":"normal"},{"name":"Psychedelictrance","data":[{"year":2018,"genre":"Psychedelictrance","total_songs_released":243,"x":2018,"y":243},{"year":2019,"genre":"Psychedelictrance","total_songs_released":236,"x":2019,"y":236},{"year":2020,"genre":"Psychedelictrance","total_songs_released":225,"x":2020,"y":225},{"year":2021,"genre":"Psychedelictrance","total_songs_released":201,"x":2021,"y":201},{"year":2022,"genre":"Psychedelictrance","total_songs_released":191,"x":2022,"y":191}],"type":"column","stacking":"normal"},{"name":"Trip-pop","data":[{"year":2018,"genre":"Trip-pop","total_songs_released":24,"x":2018,"y":24},{"year":2019,"genre":"Trip-pop","total_songs_released":38,"x":2019,"y":38},{"year":2020,"genre":"Trip-pop","total_songs_released":31,"x":2020,"y":31},{"year":2021,"genre":"Trip-pop","total_songs_released":21,"x":2021,"y":21},{"year":2022,"genre":"Trip-pop","total_songs_released":26,"x":2022,"y":26}],"type":"column","stacking":"normal"}],"xAxis":{"type":"linear","title":{"text":"Year"}},"tooltip":{"valueDecimals":0}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate count of songs released by band in across all time </span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>songs_band_count_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span>  </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(band_id) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_songs_released =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span>  </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_songs_released))</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot distribution of frequency on number of songs released at band level </span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(songs_band_count_df, <span class="fu">aes</span>(<span class="at">x =</span> total_songs_released)) <span class="sc">+</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Distribution of Frequency of Number of Songs Released by Band"</span>) <span class="sc">+</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-9-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Caclulate total count of unique bands</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>unique_bands_count <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">unique_bands =</span> <span class="fu">n_distinct</span>(band_id))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="eda-plot-distributions-of-each-features-across-year" class="level4">
<h4 class="anchored" data-anchor-id="eda-plot-distributions-of-each-features-across-year">2.4 EDA: Plot distributions of each features across year</h4>
<p>Investigate if there are any temporal patterns/anomalies at the yearly levels. Findings: The distributions of the continuous features are relatively stable across the years.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the smoothed distributions of the continuous features for each year </span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (vars <span class="cf">in</span> variables) {</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(cleaned_songs_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="sc">!!</span><span class="fu">sym</span>(vars), <span class="at">fill =</span> <span class="fu">as.factor</span>(<span class="fu">year</span>(date)))) <span class="sc">+</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste</span>(<span class="st">"Density plot of"</span>, vars)) <span class="sc">+</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-10-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-10-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the violin plots of each continuous feature for each year </span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (vars <span class="cf">in</span> variables) {</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(cleaned_songs_df, <span class="at">x =</span> <span class="sc">~</span><span class="fu">as.factor</span>(<span class="fu">year</span>(date)), <span class="at">y =</span> <span class="sc">~</span><span class="fu">get</span>(vars), <span class="at">type =</span> <span class="st">"violin"</span>,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">box =</span> <span class="fu">list</span>(<span class="at">visible =</span> <span class="cn">TRUE</span>),</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">meanline =</span> <span class="fu">list</span>(<span class="at">visible =</span> <span class="cn">TRUE</span>),</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">hoverinfo =</span> <span class="st">"text"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layout</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Violin Plot of"</span>, vars),</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> vars),</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">showlegend =</span> <span class="cn">FALSE</span>)</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="feature-engineering-create-new-features" class="level4">
<h4 class="anchored" data-anchor-id="feature-engineering-create-new-features">3.0 Feature engineering: Create new features</h4>
<p>Before continuing eda, we build some new features</p>
<p>To build model to predict the number of copies sold, we create the following features:</p>
<ul>
<li>Days since launch date of song</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume record day is last day of data set </span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>record_date <span class="ot">=</span> <span class="fu">max</span>(cleaned_songs_df<span class="sc">$</span>date)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create days since launch feature </span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>cleaned_songs_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span> </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">days_since_launch =</span> <span class="fu">as.integer</span>(<span class="fu">difftime</span>(record_date, date, <span class="at">units =</span> <span class="st">"days"</span>)))</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Append days_since_launch to variables vector </span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(variables, <span class="st">"days_since_launch"</span>)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>aggregated_variables <span class="ot">&lt;-</span><span class="fu">names</span>(features_weekly_df)[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="eda-with-new-features-plot-correlation-and-interaction-of-features-with-target-variable" class="level4">
<h4 class="anchored" data-anchor-id="eda-with-new-features-plot-correlation-and-interaction-of-features-with-target-variable">3.1 EDA with new Features: Plot correlation and interaction of features with target variable</h4>
<p><strong>Check:</strong> Investigate the correlation amongst features to understand feature importance.</p>
<p><strong>Findings:</strong></p>
<ul>
<li><p>There appears to be low correlation at the song level but high correlation at the weekly level.</p></li>
<li><p>For model A we need to model it on the song level</p></li>
<li><p>For model B when modelling for the genre of songs, consider modelling at weekly frequency</p></li>
<li><p>In particular length seems to have low correlation with the target variable, copies_sold and other features</p></li>
<li><p>There appears to be a negative relationship between copies sold and length and loudness at the song level and positive relationship at with energy.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate correlation matrix for continuous variables at different levels</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation matrix at the song level </span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>correlation_matrix_song_level <span class="ot">&lt;-</span> <span class="fu">cor</span>(cleaned_songs_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(variables)))</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation matrix at the weekly level</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>correlation_matrix_weekly <span class="ot">&lt;-</span> <span class="fu">cor</span>(features_weekly_df <span class="sc">%&gt;%</span>  <span class="fu">select</span>(<span class="fu">all_of</span>(aggregated_variables)))</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot correlation matrices </span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcorrplot</span>(correlation_matrix_song_level, <span class="at">hc.order =</span> <span class="cn">TRUE</span>, <span class="at">type =</span> <span class="st">"upper"</span>,<span class="at">lab =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcorrplot</span>(correlation_matrix_weekly, <span class="at">hc.order =</span> <span class="cn">TRUE</span>, <span class="at">type =</span> <span class="st">"upper"</span>,<span class="at">lab =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the variables and their corresponding labels</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>plot_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"energy"</span>, <span class="st">"length"</span>, <span class="st">"loudness"</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Energy"</span>, <span class="st">"Length"</span>, <span class="st">"Loudness"</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through the variables and create the scatter plots</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(plot_vars)) {</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> plot_vars[i]</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  label <span class="ot">&lt;-</span> labels[i]</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> cleaned_songs_df <span class="sc">%&gt;%</span>  <span class="fu">sample_n</span>(<span class="dv">2000</span>),</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">x =</span> <span class="sc">!!</span><span class="fu">sym</span>(var), <span class="at">y =</span> copies_sold, <span class="at">color =</span> genre, <span class="at">size =</span> days_since_launch)) <span class="sc">+</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> label, <span class="at">y =</span> <span class="st">"Copies Sold"</span>, <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Scatter Plot of"</span>, label, <span class="st">"vs. Copies Sold"</span>)) <span class="sc">+</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.box =</span> <span class="st">"vertical"</span>,</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.box.margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"cm"</span>),</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">1</span>), <span class="st">"cm"</span>)</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, <span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">3</span>)))</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-12-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-12-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-12-5.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="investigate-to-existence-of-interaction-between-features-and-target-variable" class="level4">
<h4 class="anchored" data-anchor-id="investigate-to-existence-of-interaction-between-features-and-target-variable">3.2 Investigate to existence of interaction between features and target variable</h4>
<p><strong>Check:</strong> Whether there is an interaction between <code>energy</code> and <code>loudness</code> with <code>length</code> to <code>copies_sold</code>. Rationale: A song that is high energy/loud that is long may cause fatigue in listeners reducing copies sold.</p>
<p><strong>Findings:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating quartile bins for energy, loudness and length</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>interaction_df <span class="ot">&lt;-</span> cleaned_songs_df <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">energy_bin =</span> <span class="fu">ntile</span>(energy, <span class="dv">4</span>),</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">loudness_bin =</span> <span class="fu">ntile</span>(loudness, <span class="dv">4</span>),</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">length_bin =</span> <span class="fu">ntile</span>(length, <span class="dv">4</span>))</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the interaction plot for loudness and energy</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="fu">interaction.plot</span>(<span class="at">x.factor =</span> interaction_df<span class="sc">$</span>loudness_bin,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trace.factor =</span> interaction_df<span class="sc">$</span>length_bin,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">response =</span> interaction_df<span class="sc">$</span>copies_sold,</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fun =</span> mean,</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type =</span> <span class="st">"b"</span>,</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">xlab =</span> <span class="st">"Loudness"</span>,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"purple"</span>),</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>                 <span class="at">ylab =</span> <span class="st">"Copies_sold"</span>,</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>                 <span class="at">legend =</span> <span class="cn">TRUE</span>,</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trace.label =</span> <span class="st">"Length"</span>,</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>                 <span class="at">main =</span> <span class="st">"Interaction Plot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the interaction plot for energy and length </span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">interaction.plot</span>(<span class="at">x.factor =</span> interaction_df<span class="sc">$</span>energy_bin,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trace.factor =</span> <span class="fu">as.factor</span>(interaction_df<span class="sc">$</span>length_bin),</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">response =</span> interaction_df<span class="sc">$</span>copies_sold,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fun =</span> mean,</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type =</span> <span class="st">"b"</span>,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">xlab =</span> <span class="st">"Loudness"</span>,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"purple"</span>),</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">ylab =</span> <span class="st">"Copies_sold"</span>,</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">legend =</span> <span class="cn">TRUE</span>,</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trace.label =</span> <span class="st">"Length"</span>,</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">main =</span> <span class="st">"Interaction Plot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lb_songs_eda_files/figure-html/unnamed-chunk-13-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>